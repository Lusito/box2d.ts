<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="apple-touch-icon" sizes="180x180" href="https://lusito.github.io/box2d.ts/assets/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://lusito.github.io/box2d.ts/assets/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://lusito.github.io/box2d.ts/assets/favicon-16x16.png"><link rel="shortcut icon" href="https://lusito.github.io/box2d.ts/assets/favicon.ico"><base href="/"><title>Dynamics Module (core) - @box2d</title><meta name="description" content="A TypeScript port of Box2D"><meta name="keywords" content="box2d, physics, 2d, collision, game, TypeScript"><meta property="og:site_name" content="@box2d"><meta property="og:title" content="Dynamics Module (core)"><meta property="og:description" content="A TypeScript port of Box2D"><meta property="og:locale" content="en_US"><meta property="og:url" content="https://lusito.github.io/box2d.ts/core/dynamics.html"><script src="https://lusito.github.io/box2d.ts/assets/custom-elements.js" defer="defer"></script><style>:root{--color-dark: black;--color-dark-contrast: whitesmoke;--color-dark-link: #74c0f7;--color-dark-link-visited: #b5b5b5;--color-button-link: #0a6aae;--color-button-link-visited: #b5b5b5;--color-main: whitesmoke;--color-main-contrast: black;--color-main-link: #063e66;--color-main-link-visited: #545454;--color-highlight: #063e66;--color-highlight-contrast: whitesmoke;--color-focus: rgba(6, 62, 102, 0.6);--color-focus-contrast: whitesmoke;--color-disabled: #545454;--color-disabled-contrast: whitesmoke;--color-overlay: rgba(0, 0, 0, 0.5);--color-synopsis-border: #063e66}@media(prefers-color-scheme: dark){:root{--color-main: #292929;--color-main-contrast: whitesmoke;--color-main-link: #74c0f7;--color-main-link-visited: #b5b5b5;--color-synopsis-border: #074d7e}}@font-face{font-family:"Source Sans Pro";font-style:normal;font-display:swap;font-weight:400;src:url("https://lusito.github.io/box2d.ts/assets/source-sans-pro-cyrillic-ext-400-normal-4ba425fa.woff2") format("woff2"),url("https://lusito.github.io/box2d.ts/assets/source-sans-pro-all-400-normal-56cfd2ea.woff") format("woff");unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:"Source Sans Pro";font-style:normal;font-display:swap;font-weight:400;src:url("https://lusito.github.io/box2d.ts/assets/source-sans-pro-cyrillic-400-normal-0acd59e1.woff2") format("woff2"),url("https://lusito.github.io/box2d.ts/assets/source-sans-pro-all-400-normal-56cfd2ea.woff") format("woff");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:"Source Sans Pro";font-style:normal;font-display:swap;font-weight:400;src:url("https://lusito.github.io/box2d.ts/assets/source-sans-pro-greek-ext-400-normal-f2a19d8c.woff2") format("woff2"),url("https://lusito.github.io/box2d.ts/assets/source-sans-pro-all-400-normal-56cfd2ea.woff") format("woff");unicode-range:U+1F00-1FFF}@font-face{font-family:"Source Sans Pro";font-style:normal;font-display:swap;font-weight:400;src:url("https://lusito.github.io/box2d.ts/assets/source-sans-pro-greek-400-normal-9755c83c.woff2") format("woff2"),url("https://lusito.github.io/box2d.ts/assets/source-sans-pro-all-400-normal-56cfd2ea.woff") format("woff");unicode-range:U+0370-03FF}@font-face{font-family:"Source Sans Pro";font-style:normal;font-display:swap;font-weight:400;src:url("https://lusito.github.io/box2d.ts/assets/source-sans-pro-vietnamese-400-normal-6e0839c2.woff2") format("woff2"),url("https://lusito.github.io/box2d.ts/assets/source-sans-pro-all-400-normal-56cfd2ea.woff") format("woff");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:"Source Sans Pro";font-style:normal;font-display:swap;font-weight:400;src:url("https://lusito.github.io/box2d.ts/assets/source-sans-pro-latin-ext-400-normal-ee519845.woff2") format("woff2"),url("https://lusito.github.io/box2d.ts/assets/source-sans-pro-all-400-normal-56cfd2ea.woff") format("woff");unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:"Source Sans Pro";font-style:normal;font-display:swap;font-weight:400;src:url("https://lusito.github.io/box2d.ts/assets/source-sans-pro-latin-400-normal-c124c88c.woff2") format("woff2"),url("https://lusito.github.io/box2d.ts/assets/source-sans-pro-all-400-normal-56cfd2ea.woff") format("woff");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:"Source Sans Pro";font-style:italic;font-display:swap;font-weight:400;src:url("https://lusito.github.io/box2d.ts/assets/source-sans-pro-cyrillic-ext-400-italic-acb92e25.woff2") format("woff2"),url("https://lusito.github.io/box2d.ts/assets/source-sans-pro-all-400-italic-dd55fba2.woff") format("woff");unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:"Source Sans Pro";font-style:italic;font-display:swap;font-weight:400;src:url("https://lusito.github.io/box2d.ts/assets/source-sans-pro-cyrillic-400-italic-b7674ffe.woff2") format("woff2"),url("https://lusito.github.io/box2d.ts/assets/source-sans-pro-all-400-italic-dd55fba2.woff") format("woff");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:"Source Sans Pro";font-style:italic;font-display:swap;font-weight:400;src:url("https://lusito.github.io/box2d.ts/assets/source-sans-pro-greek-ext-400-italic-b7674ffe.woff2") format("woff2"),url("https://lusito.github.io/box2d.ts/assets/source-sans-pro-all-400-italic-dd55fba2.woff") format("woff");unicode-range:U+1F00-1FFF}@font-face{font-family:"Source Sans Pro";font-style:italic;font-display:swap;font-weight:400;src:url("https://lusito.github.io/box2d.ts/assets/source-sans-pro-greek-400-italic-13d60ab4.woff2") format("woff2"),url("https://lusito.github.io/box2d.ts/assets/source-sans-pro-all-400-italic-dd55fba2.woff") format("woff");unicode-range:U+0370-03FF}@font-face{font-family:"Source Sans Pro";font-style:italic;font-display:swap;font-weight:400;src:url("https://lusito.github.io/box2d.ts/assets/source-sans-pro-vietnamese-400-italic-159bc2e7.woff2") format("woff2"),url("https://lusito.github.io/box2d.ts/assets/source-sans-pro-all-400-italic-dd55fba2.woff") format("woff");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:"Source Sans Pro";font-style:italic;font-display:swap;font-weight:400;src:url("https://lusito.github.io/box2d.ts/assets/source-sans-pro-latin-ext-400-italic-96c42fbd.woff2") format("woff2"),url("https://lusito.github.io/box2d.ts/assets/source-sans-pro-all-400-italic-dd55fba2.woff") format("woff");unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:"Source Sans Pro";font-style:italic;font-display:swap;font-weight:400;src:url("https://lusito.github.io/box2d.ts/assets/source-sans-pro-latin-400-italic-e286a9ef.woff2") format("woff2"),url("https://lusito.github.io/box2d.ts/assets/source-sans-pro-all-400-italic-dd55fba2.woff") format("woff");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:"Source Sans Pro";font-style:normal;font-display:swap;font-weight:600;src:url("https://lusito.github.io/box2d.ts/assets/source-sans-pro-cyrillic-ext-600-normal-e7585b10.woff2") format("woff2"),url("https://lusito.github.io/box2d.ts/assets/source-sans-pro-all-600-normal-536c5248.woff") format("woff");unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:"Source Sans Pro";font-style:normal;font-display:swap;font-weight:600;src:url("https://lusito.github.io/box2d.ts/assets/source-sans-pro-cyrillic-600-normal-150e4d03.woff2") format("woff2"),url("https://lusito.github.io/box2d.ts/assets/source-sans-pro-all-600-normal-536c5248.woff") format("woff");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:"Source Sans Pro";font-style:normal;font-display:swap;font-weight:600;src:url("https://lusito.github.io/box2d.ts/assets/source-sans-pro-greek-ext-600-normal-e33e69b0.woff2") format("woff2"),url("https://lusito.github.io/box2d.ts/assets/source-sans-pro-all-600-normal-536c5248.woff") format("woff");unicode-range:U+1F00-1FFF}@font-face{font-family:"Source Sans Pro";font-style:normal;font-display:swap;font-weight:600;src:url("https://lusito.github.io/box2d.ts/assets/source-sans-pro-greek-600-normal-4f2d0efc.woff2") format("woff2"),url("https://lusito.github.io/box2d.ts/assets/source-sans-pro-all-600-normal-536c5248.woff") format("woff");unicode-range:U+0370-03FF}@font-face{font-family:"Source Sans Pro";font-style:normal;font-display:swap;font-weight:600;src:url("https://lusito.github.io/box2d.ts/assets/source-sans-pro-vietnamese-600-normal-e9468c8f.woff2") format("woff2"),url("https://lusito.github.io/box2d.ts/assets/source-sans-pro-all-600-normal-536c5248.woff") format("woff");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:"Source Sans Pro";font-style:normal;font-display:swap;font-weight:600;src:url("https://lusito.github.io/box2d.ts/assets/source-sans-pro-latin-ext-600-normal-51fc350b.woff2") format("woff2"),url("https://lusito.github.io/box2d.ts/assets/source-sans-pro-all-600-normal-536c5248.woff") format("woff");unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:"Source Sans Pro";font-style:normal;font-display:swap;font-weight:600;src:url("https://lusito.github.io/box2d.ts/assets/source-sans-pro-latin-600-normal-bc9a16cd.woff2") format("woff2"),url("https://lusito.github.io/box2d.ts/assets/source-sans-pro-all-600-normal-536c5248.woff") format("woff");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:"Source Sans Pro";font-style:italic;font-display:swap;font-weight:600;src:url("https://lusito.github.io/box2d.ts/assets/source-sans-pro-cyrillic-ext-600-italic-4f31dca1.woff2") format("woff2"),url("https://lusito.github.io/box2d.ts/assets/source-sans-pro-all-600-italic-a5c1962b.woff") format("woff");unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:"Source Sans Pro";font-style:italic;font-display:swap;font-weight:600;src:url("https://lusito.github.io/box2d.ts/assets/source-sans-pro-cyrillic-600-italic-2c3b3edd.woff2") format("woff2"),url("https://lusito.github.io/box2d.ts/assets/source-sans-pro-all-600-italic-a5c1962b.woff") format("woff");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:"Source Sans Pro";font-style:italic;font-display:swap;font-weight:600;src:url("https://lusito.github.io/box2d.ts/assets/source-sans-pro-greek-ext-600-italic-2c3b3edd.woff2") format("woff2"),url("https://lusito.github.io/box2d.ts/assets/source-sans-pro-all-600-italic-a5c1962b.woff") format("woff");unicode-range:U+1F00-1FFF}@font-face{font-family:"Source Sans Pro";font-style:italic;font-display:swap;font-weight:600;src:url("https://lusito.github.io/box2d.ts/assets/source-sans-pro-greek-600-italic-0e73f070.woff2") format("woff2"),url("https://lusito.github.io/box2d.ts/assets/source-sans-pro-all-600-italic-a5c1962b.woff") format("woff");unicode-range:U+0370-03FF}@font-face{font-family:"Source Sans Pro";font-style:italic;font-display:swap;font-weight:600;src:url("https://lusito.github.io/box2d.ts/assets/source-sans-pro-vietnamese-600-italic-54708a38.woff2") format("woff2"),url("https://lusito.github.io/box2d.ts/assets/source-sans-pro-all-600-italic-a5c1962b.woff") format("woff");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:"Source Sans Pro";font-style:italic;font-display:swap;font-weight:600;src:url("https://lusito.github.io/box2d.ts/assets/source-sans-pro-latin-ext-600-italic-199af038.woff2") format("woff2"),url("https://lusito.github.io/box2d.ts/assets/source-sans-pro-all-600-italic-a5c1962b.woff") format("woff");unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:"Source Sans Pro";font-style:italic;font-display:swap;font-weight:600;src:url("https://lusito.github.io/box2d.ts/assets/source-sans-pro-latin-600-italic-49ff96b2.woff2") format("woff2"),url("https://lusito.github.io/box2d.ts/assets/source-sans-pro-all-600-italic-a5c1962b.woff") format("woff");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:"Source Code Pro";font-style:normal;font-display:swap;font-weight:400;src:url("https://lusito.github.io/box2d.ts/assets/source-code-pro-cyrillic-ext-400-normal-82671b2d.woff2") format("woff2"),url("https://lusito.github.io/box2d.ts/assets/source-code-pro-all-400-normal-b1e02d3f.woff") format("woff");unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:"Source Code Pro";font-style:normal;font-display:swap;font-weight:400;src:url("https://lusito.github.io/box2d.ts/assets/source-code-pro-cyrillic-400-normal-96444050.woff2") format("woff2"),url("https://lusito.github.io/box2d.ts/assets/source-code-pro-all-400-normal-b1e02d3f.woff") format("woff");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:"Source Code Pro";font-style:normal;font-display:swap;font-weight:400;src:url("https://lusito.github.io/box2d.ts/assets/source-code-pro-greek-ext-400-normal-3b8acbb4.woff2") format("woff2"),url("https://lusito.github.io/box2d.ts/assets/source-code-pro-all-400-normal-b1e02d3f.woff") format("woff");unicode-range:U+1F00-1FFF}@font-face{font-family:"Source Code Pro";font-style:normal;font-display:swap;font-weight:400;src:url("https://lusito.github.io/box2d.ts/assets/source-code-pro-greek-400-normal-03b0faf3.woff2") format("woff2"),url("https://lusito.github.io/box2d.ts/assets/source-code-pro-all-400-normal-b1e02d3f.woff") format("woff");unicode-range:U+0370-03FF}@font-face{font-family:"Source Code Pro";font-style:normal;font-display:swap;font-weight:400;src:url("https://lusito.github.io/box2d.ts/assets/source-code-pro-vietnamese-400-normal-4c93cdd7.woff2") format("woff2"),url("https://lusito.github.io/box2d.ts/assets/source-code-pro-all-400-normal-b1e02d3f.woff") format("woff");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:"Source Code Pro";font-style:normal;font-display:swap;font-weight:400;src:url("https://lusito.github.io/box2d.ts/assets/source-code-pro-latin-ext-400-normal-77f76588.woff2") format("woff2"),url("https://lusito.github.io/box2d.ts/assets/source-code-pro-all-400-normal-b1e02d3f.woff") format("woff");unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:"Source Code Pro";font-style:normal;font-display:swap;font-weight:400;src:url("https://lusito.github.io/box2d.ts/assets/source-code-pro-latin-400-normal-d055168e.woff2") format("woff2"),url("https://lusito.github.io/box2d.ts/assets/source-code-pro-all-400-normal-b1e02d3f.woff") format("woff");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:"Source Code Pro";font-style:italic;font-display:swap;font-weight:400;src:url("https://lusito.github.io/box2d.ts/assets/source-code-pro-cyrillic-ext-400-italic-0ccaf105.woff2") format("woff2"),url("https://lusito.github.io/box2d.ts/assets/source-code-pro-all-400-italic-34fc5d36.woff") format("woff");unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:"Source Code Pro";font-style:italic;font-display:swap;font-weight:400;src:url("https://lusito.github.io/box2d.ts/assets/source-code-pro-cyrillic-400-italic-eb229527.woff2") format("woff2"),url("https://lusito.github.io/box2d.ts/assets/source-code-pro-all-400-italic-34fc5d36.woff") format("woff");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:"Source Code Pro";font-style:italic;font-display:swap;font-weight:400;src:url("https://lusito.github.io/box2d.ts/assets/source-code-pro-greek-ext-400-italic-01dceeab.woff2") format("woff2"),url("https://lusito.github.io/box2d.ts/assets/source-code-pro-all-400-italic-34fc5d36.woff") format("woff");unicode-range:U+1F00-1FFF}@font-face{font-family:"Source Code Pro";font-style:italic;font-display:swap;font-weight:400;src:url("https://lusito.github.io/box2d.ts/assets/source-code-pro-greek-400-italic-a1f050cc.woff2") format("woff2"),url("https://lusito.github.io/box2d.ts/assets/source-code-pro-all-400-italic-34fc5d36.woff") format("woff");unicode-range:U+0370-03FF}@font-face{font-family:"Source Code Pro";font-style:italic;font-display:swap;font-weight:400;src:url("https://lusito.github.io/box2d.ts/assets/source-code-pro-vietnamese-400-italic-4e7d86ad.woff2") format("woff2"),url("https://lusito.github.io/box2d.ts/assets/source-code-pro-all-400-italic-34fc5d36.woff") format("woff");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:"Source Code Pro";font-style:italic;font-display:swap;font-weight:400;src:url("https://lusito.github.io/box2d.ts/assets/source-code-pro-latin-ext-400-italic-3f83fcb8.woff2") format("woff2"),url("https://lusito.github.io/box2d.ts/assets/source-code-pro-all-400-italic-34fc5d36.woff") format("woff");unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:"Source Code Pro";font-style:italic;font-display:swap;font-weight:400;src:url("https://lusito.github.io/box2d.ts/assets/source-code-pro-latin-400-italic-254da20d.woff2") format("woff2"),url("https://lusito.github.io/box2d.ts/assets/source-code-pro-all-400-italic-34fc5d36.woff") format("woff");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:"Source Code Pro";font-style:normal;font-display:swap;font-weight:600;src:url("https://lusito.github.io/box2d.ts/assets/source-code-pro-cyrillic-ext-600-normal-7287ba13.woff2") format("woff2"),url("https://lusito.github.io/box2d.ts/assets/source-code-pro-all-600-normal-cf98c7a1.woff") format("woff");unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:"Source Code Pro";font-style:normal;font-display:swap;font-weight:600;src:url("https://lusito.github.io/box2d.ts/assets/source-code-pro-cyrillic-600-normal-34008a2b.woff2") format("woff2"),url("https://lusito.github.io/box2d.ts/assets/source-code-pro-all-600-normal-cf98c7a1.woff") format("woff");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:"Source Code Pro";font-style:normal;font-display:swap;font-weight:600;src:url("https://lusito.github.io/box2d.ts/assets/source-code-pro-greek-ext-600-normal-353c4729.woff2") format("woff2"),url("https://lusito.github.io/box2d.ts/assets/source-code-pro-all-600-normal-cf98c7a1.woff") format("woff");unicode-range:U+1F00-1FFF}@font-face{font-family:"Source Code Pro";font-style:normal;font-display:swap;font-weight:600;src:url("https://lusito.github.io/box2d.ts/assets/source-code-pro-greek-600-normal-d42e49b4.woff2") format("woff2"),url("https://lusito.github.io/box2d.ts/assets/source-code-pro-all-600-normal-cf98c7a1.woff") format("woff");unicode-range:U+0370-03FF}@font-face{font-family:"Source Code Pro";font-style:normal;font-display:swap;font-weight:600;src:url("https://lusito.github.io/box2d.ts/assets/source-code-pro-vietnamese-600-normal-928aa37f.woff2") format("woff2"),url("https://lusito.github.io/box2d.ts/assets/source-code-pro-all-600-normal-cf98c7a1.woff") format("woff");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:"Source Code Pro";font-style:normal;font-display:swap;font-weight:600;src:url("https://lusito.github.io/box2d.ts/assets/source-code-pro-latin-ext-600-normal-e43c5275.woff2") format("woff2"),url("https://lusito.github.io/box2d.ts/assets/source-code-pro-all-600-normal-cf98c7a1.woff") format("woff");unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:"Source Code Pro";font-style:normal;font-display:swap;font-weight:600;src:url("https://lusito.github.io/box2d.ts/assets/source-code-pro-latin-600-normal-b53bffb6.woff2") format("woff2"),url("https://lusito.github.io/box2d.ts/assets/source-code-pro-all-600-normal-cf98c7a1.woff") format("woff");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:"Source Code Pro";font-style:italic;font-display:swap;font-weight:600;src:url("https://lusito.github.io/box2d.ts/assets/source-code-pro-cyrillic-ext-600-italic-92ba833e.woff2") format("woff2"),url("https://lusito.github.io/box2d.ts/assets/source-code-pro-all-600-italic-ffd124b4.woff") format("woff");unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:"Source Code Pro";font-style:italic;font-display:swap;font-weight:600;src:url("https://lusito.github.io/box2d.ts/assets/source-code-pro-cyrillic-600-italic-5f039c8d.woff2") format("woff2"),url("https://lusito.github.io/box2d.ts/assets/source-code-pro-all-600-italic-ffd124b4.woff") format("woff");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:"Source Code Pro";font-style:italic;font-display:swap;font-weight:600;src:url("https://lusito.github.io/box2d.ts/assets/source-code-pro-greek-ext-600-italic-a8f91fc8.woff2") format("woff2"),url("https://lusito.github.io/box2d.ts/assets/source-code-pro-all-600-italic-ffd124b4.woff") format("woff");unicode-range:U+1F00-1FFF}@font-face{font-family:"Source Code Pro";font-style:italic;font-display:swap;font-weight:600;src:url("https://lusito.github.io/box2d.ts/assets/source-code-pro-greek-600-italic-6020e1e8.woff2") format("woff2"),url("https://lusito.github.io/box2d.ts/assets/source-code-pro-all-600-italic-ffd124b4.woff") format("woff");unicode-range:U+0370-03FF}@font-face{font-family:"Source Code Pro";font-style:italic;font-display:swap;font-weight:600;src:url("https://lusito.github.io/box2d.ts/assets/source-code-pro-vietnamese-600-italic-9152968f.woff2") format("woff2"),url("https://lusito.github.io/box2d.ts/assets/source-code-pro-all-600-italic-ffd124b4.woff") format("woff");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:"Source Code Pro";font-style:italic;font-display:swap;font-weight:600;src:url("https://lusito.github.io/box2d.ts/assets/source-code-pro-latin-ext-600-italic-a1d09387.woff2") format("woff2"),url("https://lusito.github.io/box2d.ts/assets/source-code-pro-all-600-italic-ffd124b4.woff") format("woff");unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:"Source Code Pro";font-style:italic;font-display:swap;font-weight:600;src:url("https://lusito.github.io/box2d.ts/assets/source-code-pro-latin-600-italic-c9dc7c45.woff2") format("woff2"),url("https://lusito.github.io/box2d.ts/assets/source-code-pro-all-600-italic-ffd124b4.woff") format("woff");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{margin:0;padding:0;border:0;font:inherit;font-size:100%;vertical-align:baseline}article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block}body{line-height:1.5}blockquote,q{quotes:none}blockquote::before,blockquote::after,q::before,q::after{content:"";content:none}strong,b{font-weight:bold}em,i{font-style:italic}p,figure{margin:1em 0}figcaption{font-style:italic}blockquote{border-left:.5em solid var(--color-disabled);padding:.5em 1em;quotes:"“" "”" "‘" "’"}blockquote::before{color:var(--color-disabled);content:open-quote;font-size:4em;line-height:.1em;margin-right:.25em;vertical-align:-0.4em}sub{vertical-align:sub;font-size:smaller}sup{vertical-align:super;font-size:smaller}ul,ol{overflow:hidden;padding-left:2.5em;list-style:none}ul{list-style-type:disc}ol{list-style-type:decimal}ul ul,ol ul{list-style-type:circle}h1,h2,h3,h4,h5,h6{margin:2em 0 1.25em 0}h1{font-size:2em}h2{font-size:1.5em}h3,h4,h5,h6{font-weight:bold}h3{font-size:1.3em}h4{font-size:1em}h5{font-size:.8em}h6{font-size:.7em}table{border-collapse:collapse;border-spacing:0;width:100%}table th{font-weight:bold;background:var(--color-dark);color:var(--color-dark-contrast)}table th,table td{border:1px solid var(--color-dark);padding:.25em .5em}html,body{height:100%;overflow:hidden}body{background:var(--color-main);color:var(--color-main-contrast);font-family:"Source Sans Pro",Arial,Helvetica,sans-serif;font-size:1.125rem}a{text-decoration:underline;color:var(--color-main-link)}a:visited{color:var(--color-main-link-visited)}input:focus,select:focus,a:focus{box-shadow:0 0 0 3px var(--color-focus);outline:1px solid var(--color-focus-contrast)}</style><style>.mainwrapper_3OKMPL{position:absolute;inset:2.5rem 0 0 0;transition:all .5s ease;box-sizing:border-box;display:flex;flex-direction:column;overflow:hidden auto}.mainwrapper_3OKMPL>main{flex-grow:1}@media(min-width: 60em){.mainwrapper_3OKMPL{left:20rem}header+.mainwrapper_3OKMPL{left:0}}</style><style>.header_32lbbd{font-family:"Source Sans Pro",Arial,Helvetica,sans-serif;font-weight:bold;background:var(--color-dark);padding:0 .5rem;line-height:2.5rem;flex-shrink:0;position:relative;display:flex;transition:all .5s ease;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;justify-content:space-between}.header_32lbbd.with-side-bar_32lbbd{padding-left:2.5rem}@media(min-width: 60em){.header_32lbbd.with-side-bar_32lbbd{padding-left:.5rem}}.header_32lbbd .left_32lbbd>a,.header_32lbbd .links_32lbbd>a{color:var(--color-dark-contrast);text-decoration:none}.header_32lbbd .left_32lbbd{font-size:1.5rem;margin-left:.5rem}.header_32lbbd .right_32lbbd{display:flex;flex-direction:row;font-size:1rem}.header_32lbbd .right_32lbbd>.links_32lbbd{display:none}.header_32lbbd .right_32lbbd>.links_32lbbd>*+*::before{content:" - "}@media(min-width: 60em){.header_32lbbd .right_32lbbd>.links_32lbbd{margin-right:.5rem;display:block}}</style><style>.side-bar-overlay_2oLCk{background:rgba(0,0,0,0);transition:right 0s .5s linear,background-color .5s ease-in-out;position:fixed;inset:0 100vw 0 0;z-index:199}.side-bar_2oLCk{position:absolute;top:0;bottom:0;left:-20rem;width:20rem;z-index:200;transition:all .5s ease;background:var(--color-main);box-sizing:border-box;border-right:.25rem solid var(--color-dark)}.side-bar_2oLCk .trigger_2oLCk{position:absolute;top:0;right:-2.5rem;width:2rem;height:2.5rem;background:var(--color-dark);transition:all .5s ease;padding:.25rem;box-sizing:border-box;display:flex;flex-direction:column;justify-content:space-evenly}.side-bar_2oLCk .trigger_2oLCk>div{height:.25rem;background:var(--color-dark-contrast);box-sizing:border-box}.side-bar_2oLCk:hover,.side-bar_2oLCk:focus-within{left:0}.side-bar_2oLCk:hover+.side-bar-overlay_2oLCk,.side-bar_2oLCk:focus-within+.side-bar-overlay_2oLCk{background:var(--color-overlay);right:0;transition:right 0s linear,background-color .5s ease-in-out}@media(min-width: 60em){.side-bar_2oLCk{top:2.5rem;left:0}.side-bar_2oLCk:hover+.side-bar-overlay_2oLCk,.side-bar_2oLCk:focus-within+.side-bar-overlay_2oLCk{background:rgba(0,0,0,0);right:100vw;transition:right 0s .5s linear,background-color .5s ease-in-out}.side-bar_2oLCk .trigger_2oLCk{display:none}}.content_2oLCk{max-height:100%;overflow-y:auto}.content_2oLCk>.links_2oLCk{border-bottom:1px solid #000}.content_2oLCk>.links_2oLCk>a{padding:.5rem .75rem .5rem 1rem;display:block}.content_2oLCk>.links_2oLCk>a:hover,.content_2oLCk>.links_2oLCk>a:focus{display:block;background:var(--color-highlight);color:var(--color-highlight-contrast);outline:none;box-shadow:none;text-decoration:none}@media(min-width: 60em){.content_2oLCk>.links_2oLCk{display:none}}</style><style>:root{--color-dark: black;--color-dark-contrast: whitesmoke;--color-dark-link: #74c0f7;--color-dark-link-visited: #b5b5b5;--color-button-link: #0a6aae;--color-button-link-visited: #b5b5b5;--color-main: whitesmoke;--color-main-contrast: black;--color-main-link: #063e66;--color-main-link-visited: #545454;--color-highlight: #063e66;--color-highlight-contrast: whitesmoke;--color-focus: rgba(6, 62, 102, 0.6);--color-focus-contrast: whitesmoke;--color-disabled: #545454;--color-disabled-contrast: whitesmoke;--color-overlay: rgba(0, 0, 0, 0.5);--color-synopsis-border: #063e66}@media(prefers-color-scheme: dark){:root{--color-main: #292929;--color-main-contrast: whitesmoke;--color-main-link: #74c0f7;--color-main-link-visited: #b5b5b5;--color-synopsis-border: #074d7e}}.banner_4moMA5{position:relative;text-align:center;padding:2rem 0;background:radial-gradient(ellipse at center, #063e66 0%, #02121e 100%);color:var(--color-highlight-contrast);text-shadow:0 0 1em var(--color-dark);justify-content:center;display:flex;flex-direction:row;word-break:break-word;margin-top:0}.banner_4moMA5>*{z-index:2;margin:0;max-width:50rem;width:100%;text-align:left;padding:0 1rem;box-sizing:border-box}@media(min-width: 50em){.banner_4moMA5>*{padding:0 2rem;max-width:50rem}}.banner_4moMA5::before{content:"";position:absolute;inset:0 0 0 0;background-repeat:no-repeat;background-size:cover;background-position:top center;background-attachment:fixed;background-image:url("https://lusito.github.io/box2d.ts/assets/background-f13db739.svg");pointer-events:none}</style><style>.container_3bsacv{margin:2rem auto;padding:0 1rem;box-sizing:border-box}.container_3bsacv>*{flex-grow:1}@media(min-width: 50em){.container_3bsacv{padding:0 2rem;max-width:50rem}}</style><style>.footer_1ydRsP{background:var(--color-dark);color:var(--color-dark-contrast);text-align:center;padding:.5rem;display:flex;flex-direction:column}.footer_1ydRsP a{color:var(--color-dark-link)}.footer_1ydRsP a:visited{color:var(--color-dark-link-visited)}@media(min-width: 50em){.footer_1ydRsP{display:block}.footer_1ydRsP>*+*::before{content:" - "}}</style><style>.search-container_2FB2WB{display:flex}.search-button_2FB2WB{width:2.5rem;height:2.5rem;padding:0;background-color:rgba(0,0,0,0);background-image:url("https://lusito.github.io/box2d.ts/assets/search-fac9a8b9.svg");background-size:1.5rem;background-repeat:no-repeat;background-position:center;border:none;cursor:pointer}.search-field-wrapper_2FB2WB{display:flex;flex-direction:row;line-height:2rem}.search-field-wrapper_2FB2WB>span{padding:.25rem .75rem;background:var(--color-dark);color:var(--color-dark-contrast)}.search-field-wrapper_2FB2WB>input.search-field_2FB2WB{flex-grow:1;padding:.25rem .75rem;border:1px solid var(--color-dark);background:#fff;color:#000}.search-overlay_2FB2WB{display:none;position:fixed;inset:2.5rem 0 0 0;padding:1rem;background:var(--color-main);color:var(--color-main-contrast);z-index:3;overflow:auto;box-shadow:-0.5rem 0px .75rem 0px var(--color-overlay)}@media(min-width: 60em){.search-overlay_2FB2WB{left:auto;width:30rem;border-left:.25rem solid var(--color-dark)}}.search-overlay_2FB2WB.search-overlay-visible_2FB2WB{display:block}.search-overlay_2FB2WB>h2{border-bottom:1px solid var(--color-main-contrast)}.search-overlay_2FB2WB li{line-height:normal;padding:.25rem 0}.search-overlay_2FB2WB li>a{padding:.25rem}.search-overlay_2FB2WB li>a:hover,.search-overlay_2FB2WB li>a:focus{background:var(--color-highlight);color:var(--color-highlight-contrast);outline:none;box-shadow:none;text-decoration:none}.search-items_2FB2WB{list-style:inherit}</style><style>.side-bar-menu_2PNEaA,.side-bar-menu_2PNEaA ul{font-family:"Source Sans Pro",Arial,Helvetica,sans-serif;width:100%;list-style-type:none;padding:0;margin:0}.side-bar-menu_2PNEaA{padding:1rem 0}.side-bar-menu_2PNEaA li{display:list-item;font-size:1.25rem}.side-bar-menu_2PNEaA li:not(.nested_2PNEaA){font-weight:bold}.side-bar-menu_2PNEaA li>a{display:block;padding:.75rem;text-decoration:none;border-left:.25em solid rgba(0,0,0,0)}.side-bar-menu_2PNEaA li>a:not(:hover,:focus){color:var(--color-main-contrast)}.side-bar-menu_2PNEaA li>a:hover,.side-bar-menu_2PNEaA li>a:focus{display:block;background:var(--color-highlight);color:var(--color-highlight-contrast);outline:none;box-shadow:none;text-decoration:none}.side-bar-menu_2PNEaA li.project-selector_2PNEaA{padding:.5rem .75rem;border-left:.25em solid rgba(0,0,0,0)}.side-bar-menu_2PNEaA li.project-selector_2PNEaA>select{display:block;width:100%;overflow:hidden;text-overflow:ellipsis}.side-bar-menu_2PNEaA li.selected_2PNEaA>a{border-color:var(--color-highlight)}.side-bar-menu_2PNEaA li.nested_2PNEaA>a{padding:.25rem .5rem;padding-left:1.5rem;font-size:1rem}</style><style>.markdown-content_LJDte{word-break:break-word}.markdown-content_LJDte h1{display:none}.markdown-content_LJDte h2{border-bottom:1px solid var(--color-main-contrast)}.markdown-content_LJDte figure{width:100%;table-layout:fixed}.markdown-content_LJDte img.large-image_LJDte{width:calc(100% + 2rem);height:auto;margin:0 -1rem}@media(min-width: 50em){.markdown-content_LJDte img.large-image_LJDte{width:auto;max-width:100%;margin:0}}.markdown-content_LJDte h1 code,.markdown-content_LJDte h2 code,.markdown-content_LJDte h3 code,.markdown-content_LJDte h4 code,.markdown-content_LJDte h5 code,.markdown-content_LJDte h6 code{font-family:"Source Code Pro",Consolas,Monaco,monospace;border:1px solid #dcdcdc;border-radius:.25rem;padding:0 .25em}.markdown-content_LJDte p code,.markdown-content_LJDte ul code,.markdown-content_LJDte ol code{font-family:"Source Code Pro",Consolas,Monaco,monospace;background:#dcdcdc;color:#1e1e1e;border-radius:.25rem;padding:0 .25em}.markdown-content_LJDte pre{position:relative}.markdown-content_LJDte pre>code{border-radius:0;margin:1rem -1rem;font-family:"Source Code Pro",Consolas,Monaco,monospace}@media(min-width: 50em){.markdown-content_LJDte pre>code{border-radius:.5rem;margin:1rem 0}}.markdown-content_LJDte pre code-copy-button:not(.enhanced-copy-button_LJDte){display:none}.markdown-content_LJDte pre code-copy-button.enhanced-copy-button_LJDte{position:absolute;top:1rem;right:1rem;width:2rem;height:2rem;background:var(--color-dark-contrast);border-radius:.5rem;cursor:pointer;opacity:0;transition:opacity .4s ease-in-out}.markdown-content_LJDte pre code-copy-button.enhanced-copy-button_LJDte:active{filter:brightness(0.75)}.markdown-content_LJDte pre code-copy-button.enhanced-copy-button_LJDte:focus{outline:none;box-shadow:0 0 0 3px var(--color-dark-link)}.markdown-content_LJDte pre code-copy-button.enhanced-copy-button_LJDte::before,.markdown-content_LJDte pre code-copy-button.enhanced-copy-button_LJDte::after{content:"";background:var(--color-dark-contrast);border:1px solid var(--color-dark);box-shadow:0 0 1px 2px var(--color-dark-contrast);width:35%;height:35%;border-radius:20%;position:absolute}.markdown-content_LJDte pre code-copy-button.enhanced-copy-button_LJDte::before{bottom:20%;left:20%}.markdown-content_LJDte pre code-copy-button.enhanced-copy-button_LJDte::after{top:20%;right:20%}.markdown-content_LJDte pre:hover code-copy-button,.markdown-content_LJDte pre:focus-within code-copy-button{opacity:1}</style><style>pre code.hljs{display:block;overflow-x:auto;padding:1em}code.hljs{padding:3px 5px}.hljs{background:#1e1e1e;color:#dcdcdc}.hljs-keyword,.hljs-literal,.hljs-symbol,.hljs-name{color:#569cd6}.hljs-link{color:#569cd6;text-decoration:underline}.hljs-built_in,.hljs-type{color:#4ec9b0}.hljs-number,.hljs-class{color:#b8d7a3}.hljs-string,.hljs-meta .hljs-string{color:#d69d85}.hljs-regexp,.hljs-template-tag{color:#9a5334}.hljs-subst,.hljs-function,.hljs-title,.hljs-params,.hljs-formula{color:#dcdcdc}.hljs-comment,.hljs-quote{color:#57a64a;font-style:italic}.hljs-doctag{color:#608b4e}.hljs-meta,.hljs-meta .hljs-keyword,.hljs-tag{color:#9b9b9b}.hljs-variable,.hljs-template-variable{color:#bd63c5}.hljs-attr,.hljs-attribute{color:#9cdcfe}.hljs-section{color:gold}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:bold}.hljs-bullet,.hljs-selector-tag,.hljs-selector-id,.hljs-selector-class,.hljs-selector-attr,.hljs-selector-pseudo{color:#d7ba7d}.hljs-addition{background-color:#144212;display:inline-block;width:100%}.hljs-deletion{background-color:#600;display:inline-block;width:100%}</style></head><body><header class="header_32lbbd with-side-bar_32lbbd"><div class="left_32lbbd"><a href="https://lusito.github.io/box2d.ts/index.html">@box2d</a></div><div class="right_32lbbd"><search-container class="search-container_2FB2WB" searchbutton="search-button_2FB2WB" searchfield="search-field_2FB2WB" searchdata="https://lusito.github.io/box2d.ts/search-data.json" searchitems="search-items_2FB2WB" overlay="search-overlay_2FB2WB" overlayvisible="search-overlay-visible_2FB2WB"><button class="search-button_2FB2WB" title="Search" aria-label="Search"></button><div class="search-overlay_2FB2WB"><label class="search-field-wrapper_2FB2WB"><span>Search: </span><input type="search" autofocus="autofocus" class="search-field_2FB2WB"></label><h2>Search results:</h2><ul class="search-items_2FB2WB"></ul></div></search-container><div class="links_32lbbd"><a href="/benchmark/">Benchmarks</a><a href="/testbed/">Demos</a><a href="https://github.com/lusito/box2d.ts" rel="noopener nofollow" target="_blank">Github</a></div></div></header><div class="side-bar_2oLCk scatman-container"><div class="content_2oLCk"><div class="links_2oLCk"><a href="/benchmark/">Benchmarks</a><a href="/testbed/">Demos</a><a href="https://github.com/lusito/box2d.ts" rel="noopener nofollow" target="_blank">Github</a></div><nav role="navigation" aria-label="Main Menu"><ul class="side-bar-menu_2PNEaA"><li class="project-selector_2PNEaA"><select autocomplete="off" is="link-select"><option value="https://lusito.github.io/box2d.ts/core/index.html" selected="selected">Project: core</option><option value="https://lusito.github.io/box2d.ts/controllers/index.html">Project: controllers</option><option value="https://lusito.github.io/box2d.ts/lights/index.html">Project: lights</option><option value="https://lusito.github.io/box2d.ts/particles/index.html">Project: particles</option><option value="https://lusito.github.io/box2d.ts/debug-draw/index.html">Project: debug-draw</option></select></li><li><a href="https://lusito.github.io/box2d.ts/core/index.html">Readme</a></li><li><a href="https://lusito.github.io/box2d.ts/core/setup.html">Setup</a></li><li class="nested_2PNEaA"><a href="https://lusito.github.io/box2d.ts/core/setup.html#install-with-npm">Install With NPM</a></li><li class="nested_2PNEaA"><a href="https://lusito.github.io/box2d.ts/core/setup.html#typescript-vs-javascript">TypeScript vs JavaScript</a></li><li><a href="https://lusito.github.io/box2d.ts/core/key-differences.html">Key Differences to C++</a></li><li class="nested_2PNEaA"><a href="https://lusito.github.io/box2d.ts/core/key-differences.html#no-class-instances-on-the-stack">No Class Instances on the Stack</a></li><li class="nested_2PNEaA"><a href="https://lusito.github.io/box2d.ts/core/key-differences.html#garbage-collector-considerations">Garbage Collector Considerations</a></li><li class="nested_2PNEaA"><a href="https://lusito.github.io/box2d.ts/core/key-differences.html#operators">Operators</a></li><li class="nested_2PNEaA"><a href="https://lusito.github.io/box2d.ts/core/key-differences.html#math-operations">Math Operations</a></li><li class="nested_2PNEaA"><a href="https://lusito.github.io/box2d.ts/core/key-differences.html#vec2-vs-xy">Vec2 vs XY</a></li><li class="nested_2PNEaA"><a href="https://lusito.github.io/box2d.ts/core/key-differences.html#overloads">Overloads</a></li><li class="nested_2PNEaA"><a href="https://lusito.github.io/box2d.ts/core/key-differences.html#factory-functions-vs-constructors">Factory Functions vs Constructors</a></li><li class="nested_2PNEaA"><a href="https://lusito.github.io/box2d.ts/core/key-differences.html#user-data">User Data</a></li><li><a href="https://lusito.github.io/box2d.ts/core/overview.html">Overview</a></li><li class="nested_2PNEaA"><a href="https://lusito.github.io/box2d.ts/core/overview.html#prerequisites">Prerequisites</a></li><li class="nested_2PNEaA"><a href="https://lusito.github.io/box2d.ts/core/overview.html#scope">Scope</a></li><li class="nested_2PNEaA"><a href="https://lusito.github.io/box2d.ts/core/overview.html#feedback-and-bugs">Feedback and Bugs</a></li><li class="nested_2PNEaA"><a href="https://lusito.github.io/box2d.ts/core/overview.html#core-concepts">Core Concepts</a></li><li class="nested_2PNEaA"><a href="https://lusito.github.io/box2d.ts/core/overview.html#modules">Modules</a></li><li class="nested_2PNEaA"><a href="https://lusito.github.io/box2d.ts/core/overview.html#units">Units</a></li><li class="nested_2PNEaA"><a href="https://lusito.github.io/box2d.ts/core/overview.html#changing-the-length-units">Changing The Length Units</a></li><li class="nested_2PNEaA"><a href="https://lusito.github.io/box2d.ts/core/overview.html#factories-and-definitions">Factories and Definitions</a></li><li><a href="https://lusito.github.io/box2d.ts/core/hello.html">Hello Box2D</a></li><li class="nested_2PNEaA"><a href="https://lusito.github.io/box2d.ts/core/hello.html#creating-a-world">Creating a World</a></li><li class="nested_2PNEaA"><a href="https://lusito.github.io/box2d.ts/core/hello.html#creating-a-ground-box">Creating a Ground Box</a></li><li class="nested_2PNEaA"><a href="https://lusito.github.io/box2d.ts/core/hello.html#creating-a-dynamic-body">Creating a Dynamic Body</a></li><li class="nested_2PNEaA"><a href="https://lusito.github.io/box2d.ts/core/hello.html#simulating-the-world">Simulating the World</a></li><li class="nested_2PNEaA"><a href="https://lusito.github.io/box2d.ts/core/hello.html#cleanup">Cleanup</a></li><li><a href="https://lusito.github.io/box2d.ts/core/testbed.html">Testbed</a></li><li><a href="https://lusito.github.io/box2d.ts/core/common.html">Common Module</a></li><li class="nested_2PNEaA"><a href="https://lusito.github.io/box2d.ts/core/common.html#settings">Settings</a></li><li class="nested_2PNEaA"><a href="https://lusito.github.io/box2d.ts/core/common.html#version">Version</a></li><li class="nested_2PNEaA"><a href="https://lusito.github.io/box2d.ts/core/common.html#math">Math</a></li><li class="nested_2PNEaA"><a href="https://lusito.github.io/box2d.ts/core/common.html#readonly-types">Readonly Types</a></li><li><a href="https://lusito.github.io/box2d.ts/core/collision.html">Collision Module</a></li><li class="nested_2PNEaA"><a href="https://lusito.github.io/box2d.ts/core/collision.html#shapes">Shapes</a></li><li class="nested_2PNEaA"><a href="https://lusito.github.io/box2d.ts/core/collision.html#geometric-queries">Geometric Queries</a></li><li class="nested_2PNEaA"><a href="https://lusito.github.io/box2d.ts/core/collision.html#pairwise-functions">Pairwise Functions</a></li><li class="nested_2PNEaA"><a href="https://lusito.github.io/box2d.ts/core/collision.html#dynamic-tree">Dynamic Tree</a></li><li class="nested_2PNEaA"><a href="https://lusito.github.io/box2d.ts/core/collision.html#broad-phase">Broad-Phase</a></li><li class="selected_2PNEaA"><a href="https://lusito.github.io/box2d.ts/core/dynamics.html" aria-label="Current page, Dynamics Module" aria-current="page">Dynamics Module</a></li><li class="nested_2PNEaA"><a href="https://lusito.github.io/box2d.ts/core/dynamics.html#bodies">Bodies</a></li><li class="nested_2PNEaA"><a href="https://lusito.github.io/box2d.ts/core/dynamics.html#fixtures">Fixtures</a></li><li class="nested_2PNEaA"><a href="https://lusito.github.io/box2d.ts/core/dynamics.html#joints">Joints</a></li><li class="nested_2PNEaA"><a href="https://lusito.github.io/box2d.ts/core/dynamics.html#contacts">Contacts</a></li><li class="nested_2PNEaA"><a href="https://lusito.github.io/box2d.ts/core/dynamics.html#world">World</a></li><li><a href="https://lusito.github.io/box2d.ts/core/loose-ends.html">Loose Ends</a></li><li class="nested_2PNEaA"><a href="https://lusito.github.io/box2d.ts/core/loose-ends.html#user-data">User Data</a></li><li class="nested_2PNEaA"><a href="https://lusito.github.io/box2d.ts/core/loose-ends.html#user-data-types">User Data Types</a></li><li class="nested_2PNEaA"><a href="https://lusito.github.io/box2d.ts/core/loose-ends.html#implicit-destruction">Implicit Destruction</a></li><li class="nested_2PNEaA"><a href="https://lusito.github.io/box2d.ts/core/loose-ends.html#pixels-and-coordinate-systems">Pixels and Coordinate Systems</a></li><li class="nested_2PNEaA"><a href="https://lusito.github.io/box2d.ts/core/loose-ends.html#debug-drawing">Debug Drawing</a></li><li class="nested_2PNEaA"><a href="https://lusito.github.io/box2d.ts/core/loose-ends.html#limitations">Limitations</a></li><li><a href="https://lusito.github.io/box2d.ts/core/references.html">References</a></li><li><a href="https://lusito.github.io/box2d.ts/core/faq.html">FAQ</a></li><li class="nested_2PNEaA"><a href="https://lusito.github.io/box2d.ts/core/faq.html#what-is-box2d">What Is Box2D?</a></li><li class="nested_2PNEaA"><a href="https://lusito.github.io/box2d.ts/core/faq.html#what-is-box2d">What Is @box2d?</a></li><li class="nested_2PNEaA"><a href="https://lusito.github.io/box2d.ts/core/faq.html#who-makes-it">Who Makes It?</a></li><li class="nested_2PNEaA"><a href="https://lusito.github.io/box2d.ts/core/faq.html#how-do-i-get-help">How Do I Get Help?</a></li><li class="nested_2PNEaA"><a href="https://lusito.github.io/box2d.ts/core/faq.html#documentation">Documentation</a></li><li class="nested_2PNEaA"><a href="https://lusito.github.io/box2d.ts/core/faq.html#prerequisites">Prerequisites</a></li><li class="nested_2PNEaA"><a href="https://lusito.github.io/box2d.ts/core/faq.html#api">API</a></li><li class="nested_2PNEaA"><a href="https://lusito.github.io/box2d.ts/core/faq.html#rendering">Rendering</a></li><li class="nested_2PNEaA"><a href="https://lusito.github.io/box2d.ts/core/faq.html#accuracy">Accuracy</a></li><li class="nested_2PNEaA"><a href="https://lusito.github.io/box2d.ts/core/faq.html#making-games">Making Games</a></li><li class="nested_2PNEaA"><a href="https://lusito.github.io/box2d.ts/core/faq.html#determinism">Determinism</a></li><li class="nested_2PNEaA"><a href="https://lusito.github.io/box2d.ts/core/faq.html#why-is-the-restitutionfriction-mixing-inaccurate">Why Is The Restitution/Friction Mixing Inaccurate?</a></li><li class="nested_2PNEaA"><a href="https://lusito.github.io/box2d.ts/core/faq.html#what-are-the-biggest-mistakes-made-by-new-users">What Are The Biggest Mistakes Made By New Users?</a></li></ul></nav></div><div class="trigger_2oLCk"><div></div><div></div><div></div></div></div><div class="side-bar-overlay_2oLCk"></div><div class="mainwrapper_3OKMPL scatman-container scatman-scroll-area"><main><div class="banner_4moMA5"><h1>Dynamics Module</h1></div><article><div class="container_3bsacv"><div class="markdown-content_LJDte"><h1>Dynamics Module</h1>
<p>The Dynamics module is the most complex part of Box2D and is the part
you likely interact with the most. The Dynamics module sits on top of
the Common and Collision modules, so you should be somewhat familiar
with those by now.</p>
<p>The Dynamics module contains:</p>
<ul>
<li>fixture class</li>
<li>rigid body class</li>
<li>contact class</li>
<li>joint classes</li>
<li>world class</li>
<li>listener classes</li>
</ul>
<p>There are many dependencies between these classes so it is difficult to
describe one class without referring to another. In the following, you
may see some references to classes that have not been described yet.
Therefore, you may want to quickly skim this chapter before reading it
closely.</p>
<p>The dynamics module is covered in the following chapters.</p>
<h2 id="bodies">Bodies</h2>
<p>Bodies have position and velocity. You can apply forces, torques, and
impulses to bodies. Bodies can be static, kinematic, or dynamic. Here
are the body type definitions:</p>
<h4><code>b2_staticBody</code></h4>
<p>A static body does not move under simulation and behaves as if it has
infinite mass. Internally, Box2D stores zero for the mass and the
inverse mass. Static bodies can be moved manually by the user. A static
body has zero velocity. Static bodies do not collide with other static
or kinematic bodies.</p>
<h4><code>b2_kinematicBody</code></h4>
<p>A kinematic body moves under simulation according to its velocity.
Kinematic bodies do not respond to forces. They can be moved manually by
the user, but normally a kinematic body is moved by setting its
velocity. A kinematic body behaves as if it has infinite mass, however,
Box2D stores zero for the mass and the inverse mass. Kinematic bodies do
not collide with other kinematic or static bodies.</p>
<h4><code>b2_dynamicBody</code></h4>
<p>A dynamic body is fully simulated. They can be moved manually by the
user, but normally they move according to forces. A dynamic body can
collide with all body types. A dynamic body always has finite, non-zero
mass. If you try to set the mass of a dynamic body to zero, it will
automatically acquire a mass of one kilogram and it won't rotate.</p>
<p>Bodies are the backbone for fixtures (shapes). Bodies carry fixtures and
move them around in the world. Bodies are always rigid bodies in Box2D.
That means that two fixtures attached to the same rigid body never move
relative to each other and fixtures attached to the same body don't
collide.</p>
<p>Fixtures have collision geometry and density. Normally, bodies acquire
their mass properties from the fixtures. However, you can override the
mass properties after a body is constructed.</p>
<p>You usually keep references to all the bodies you create. This way you can
query the body positions to update the positions of your graphical
entities. You should also keep body references so you can destroy them
when you are done with them.</p>
<h3>Body Definition</h3>
<p>Before a body is created you must create a body definition (b2BodyDef).
The body definition holds the data needed to create and initialize a
body.</p>
<p>Box2D copies the data out of the body definition; it does not keep a
reference to the body definition. This means you can recycle a body
definition to create multiple bodies.</p>
<p>Let's go over some of the key members of the body definition.</p>
<h3>Body Type</h3>
<p>As discussed at the beginning of this chapter, there are three different
body types: static, kinematic, and dynamic. You should establish the
body type at creation because changing the body type later is expensive.</p>
<pre><code class="hljs"><span class="hljs-keyword">const</span> <span class="hljs-attr">bodyDef</span>: b2BodyDef = {
  <span class="hljs-attr">type</span>: b2BodyType.<span class="hljs-property">b2_dynamicBody</span>,
};
</code><code-copy-button role="button" code="const bodyDef: b2BodyDef = {
  type: b2BodyType.b2_dynamicBody,
};" title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<p>Setting the body type is mandatory.</p>
<h3>Position and Angle</h3>
<p>The body definition gives you the chance to initialize the position of
the body on creation. This has far better performance than creating the
body at the world origin and then moving the body.</p>
<blockquote>
<p><strong>Caution</strong>:
Do not create a body at the origin and then move it. If you create
several bodies at the origin, then performance will suffer.</p>
</blockquote>
<p>A body has two main points of interest. The first point is the body's
origin. Fixtures and joints are attached relative to the body's origin.
The second point of interest is the center of mass. The center of mass
is determined from mass distribution of the attached shapes or is
explicitly set with b2MassData. Much of Box2D's internal computations
use the center of mass position. For example b2Body stores the linear
velocity for the center of mass.</p>
<p>When you are building the body definition, you may not know where the
center of mass is located. Therefore you specify the position of the
body's origin. You may also specify the body's angle in radians, which
is not affected by the position of the center of mass. If you later
change the mass properties of the body, then the center of mass may move
on the body, but the origin position does not change and the attached
shapes and joints do not move.</p>
<pre><code class="hljs"><span class="hljs-keyword">const</span> <span class="hljs-attr">bodyDef</span>: b2BodyDef = {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">position</span>: { <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">2</span> }, <span class="hljs-comment">// the body&#x27;s origin position.</span>
  <span class="hljs-attr">angle</span>: <span class="hljs-number">0.25</span> * <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span>, <span class="hljs-comment">// the body&#x27;s angle in radians.</span>
};
</code><code-copy-button role="button" code="const bodyDef: b2BodyDef = {
  // ...
  position: { x: 0, y: 2 }, // the body&#x27;s origin position.
  angle: 0.25 * Math.PI, // the body&#x27;s angle in radians.
};" title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<p>A rigid body is also a frame of reference. You can define fixtures and
joints in that frame. Those fixtures and joint anchors never move in the
local frame of the body.</p>
<h3>Damping</h3>
<p>Damping is used to reduce the world velocity of bodies. Damping is
different than friction because friction only occurs with contact.
Damping is not a replacement for friction and the two effects should be
used together.</p>
<p>Damping parameters should be between 0 and infinity, with 0 meaning no
damping, and infinity meaning full damping. Normally you will use a
damping value between 0 and 0.1. I generally do not use linear damping
because it makes bodies look like they are floating.</p>
<pre><code class="hljs"><span class="hljs-keyword">const</span> <span class="hljs-attr">bodyDef</span>: b2BodyDef = {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">linearDamping</span>: <span class="hljs-number">0</span>,
  <span class="hljs-attr">angularDamping</span>: <span class="hljs-number">0.01</span>,
};
</code><code-copy-button role="button" code="const bodyDef: b2BodyDef = {
  // ...
  linearDamping: 0,
  angularDamping: 0.01,
};" title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<p>Damping is approximated for stability and performance. At small damping
values the damping effect is mostly independent of the time step. At
larger damping values, the damping effect will vary with the time step.
This is not an issue if you use a fixed time step (recommended).</p>
<h3>Gravity Scale</h3>
<p>You can use the gravity scale to adjust the gravity on a single body. Be
careful though, increased gravity can decrease stability.</p>
<pre><code class="hljs"><span class="hljs-comment">// Set the gravity scale to zero so this body will float</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">bodyDef</span>: b2BodyDef = {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">gravityScale</span>: <span class="hljs-number">0</span>,
};
</code><code-copy-button role="button" code="// Set the gravity scale to zero so this body will float
const bodyDef: b2BodyDef = {
  // ...
  gravityScale: 0,
};" title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<h3>Sleep Parameters</h3>
<p>What does sleep mean? Well it is expensive to simulate bodies, so the
less we have to simulate the better. When a body comes to rest we would
like to stop simulating it.</p>
<p>When Box2D determines that a body (or group of bodies) has come to rest,
the body enters a sleep state which has very little CPU overhead. If a
body is awake and collides with a sleeping body, then the sleeping body
wakes up. Bodies will also wake up if a joint or contact attached to
them is destroyed. You can also wake a body manually.</p>
<p>The body definition lets you specify whether a body can sleep and
whether a body is created sleeping.</p>
<pre><code class="hljs"><span class="hljs-keyword">const</span> <span class="hljs-attr">bodyDef</span>: b2BodyDef = {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">allowSleep</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">awake</span>: <span class="hljs-literal">true</span>,
};
</code><code-copy-button role="button" code="const bodyDef: b2BodyDef = {
  // ...
  allowSleep: true,
  awake: true,
};" title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<h3>Fixed Rotation</h3>
<p>You may want a rigid body, such as a character, to have a fixed
rotation. Such a body should not rotate, even under load. You can use
the fixed rotation setting to achieve this:</p>
<pre><code class="hljs"><span class="hljs-keyword">const</span> <span class="hljs-attr">bodyDef</span>: b2BodyDef = {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">fixedRotation</span>: <span class="hljs-literal">true</span>,
};
</code><code-copy-button role="button" code="const bodyDef: b2BodyDef = {
  // ...
  fixedRotation: true,
};" title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<p>The fixed rotation flag causes the rotational inertia and its inverse to
be set to zero.</p>
<h3>Bullets</h3>
<p>Game simulation usually generates a sequence of images that are played
at some frame rate. This is called discrete simulation. In discrete
simulation, rigid bodies can move by a large amount in one time step. If
a physics engine doesn't account for the large motion, you may see some
objects incorrectly pass through each other. This effect is called
tunneling.</p>
<p>By default, Box2D uses continuous collision detection (CCD) to prevent
dynamic bodies from tunneling through static bodies. This is done by
sweeping shapes from their old position to their new positions. The
engine looks for new collisions during the sweep and computes the time
of impact (TOI) for these collisions. Bodies are moved to their first
TOI and then the solver performs a sub-step to complete the full time
step. There may be additional TOI events within a sub-step.</p>
<p>Normally CCD is not used between dynamic bodies. This is done to keep
performance reasonable. In some game scenarios you need dynamic bodies
to use CCD. For example, you may want to shoot a high speed bullet at a
stack of dynamic bricks. Without CCD, the bullet might tunnel through
the bricks.</p>
<p>Fast moving objects in Box2D can be labeled as bullets. Bullets will
perform CCD with both static and dynamic bodies. You should decide what
bodies should be bullets based on your game design. If you decide a body
should be treated as a bullet, use the following setting.</p>
<pre><code class="hljs"><span class="hljs-keyword">const</span> <span class="hljs-attr">bodyDef</span>: b2BodyDef = {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">bullet</span>: <span class="hljs-literal">true</span>,
};
</code><code-copy-button role="button" code="const bodyDef: b2BodyDef = {
  // ...
  bullet: true,
};" title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<p>The bullet flag only affects dynamic bodies.</p>
<h3>Activation</h3>
<p>You may wish a body to be created but not participate in collision or
dynamics. This state is similar to sleeping except the body will not be
woken by other bodies and the body's fixtures will not be placed in the
broad-phase. This means the body will not participate in collisions, ray
casts, etc.</p>
<p>You can create a body in an inactive state and later re-activate it.</p>
<pre><code class="hljs"><span class="hljs-keyword">const</span> <span class="hljs-attr">bodyDef</span>: b2BodyDef = {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">active</span>: <span class="hljs-literal">true</span>,
};
</code><code-copy-button role="button" code="const bodyDef: b2BodyDef = {
  // ...
  active: true,
};" title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<p>Joints may be connected to inactive bodies. These joints will not be
simulated. You should be careful when you activate a body that its
joints are not distorted.</p>
<p>Note that activating a body is almost as expensive as creating the body
from scratch. So you should not use activation for streaming worlds. Use
creation/destruction for streaming worlds to save memory.</p>
<h3>User Data</h3>
<p>User data is a Record of references. This gives you a hook to link your
application objects to bodies, fixtures and joints.
Check <a href="https://lusito.github.io/box2d.ts/core/loose-ends.html#user-data">loose ends</a> for more details.</p>
<pre><code class="hljs"><span class="hljs-keyword">const</span> <span class="hljs-attr">bodyDef</span>: b2BodyDef = {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">userData</span>: {
    <span class="hljs-attr">actor</span>: myActor,
  },
};
</code><code-copy-button role="button" code="const bodyDef: b2BodyDef = {
  // ...
  userData: {
    actor: myActor,
  },
};" title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<h3>Body Factory</h3>
<p>Bodies are created and destroyed using a body factory provided by the
world class. This lets the world create the body and add the body to the world data structure.</p>
<pre><code class="hljs"><span class="hljs-keyword">const</span> <span class="hljs-attr">myWorld</span>: b2World = ...;
<span class="hljs-keyword">const</span> <span class="hljs-attr">dynamicBody</span>: b2Body = myWorld.<span class="hljs-title function_">createBody</span>(bodyDef);

<span class="hljs-comment">// ... do stuff ...</span>

myWorld.<span class="hljs-title class_">DestroyBody</span>(dynamicBody);
<span class="hljs-comment">// stop using dynamicBody from this point on!</span>
</code><code-copy-button role="button" code="const myWorld: b2World = ...;
const dynamicBody: b2Body = myWorld.createBody(bodyDef);

// ... do stuff ...

myWorld.DestroyBody(dynamicBody);
// stop using dynamicBody from this point on!" title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<blockquote>
<p><strong>Caution</strong>:
You should never use new to create a body. The world won't
know about the body and the body won't be properly initialized.</p>
</blockquote>
<p>Box2D does not keep a reference to the body definition or any of the
data it holds (except references in user data records).
So you can create temporary body definitions and reuse the same body definitions.</p>
<p>Box2D allows you to avoid destroying bodies by deleting your b2World
object, which does all the cleanup work for you. However, you should be
mindful to remove body references that you keep in your game engine.</p>
<p>When you destroy a body, the attached fixtures and joints are
automatically destroyed. This has important implications for how you
manage shape and joint references.</p>
<h3>Using a Body</h3>
<p>After creating a body, there are many operations you can perform on the
body. These include setting mass properties, accessing position and
velocity, applying forces, and transforming points and vectors.</p>
<h3>Mass Data</h3>
<p>A body has mass (scalar), center of mass (2-vector), and rotational
inertia (scalar). For static bodies, the mass and rotational inertia are
set to zero. When a body has fixed rotation, its rotational inertia is
zero.</p>
<p>Normally the mass properties of a body are established automatically
when fixtures are added to the body. You can also adjust the mass of a
body at run-time. This is usually done when you have special game
scenarios that require altering the mass.</p>
<pre><code class="hljs"><span class="hljs-comment">// on b2Body:</span>
<span class="hljs-keyword">public</span> <span class="hljs-title class_">SetMassData</span>(<span class="hljs-attr">massData</span>: b2MassData): <span class="hljs-built_in">void</span>;
</code><code-copy-button role="button" code="// on b2Body:
public SetMassData(massData: b2MassData): void;" title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<p>After setting a body's mass directly, you may wish to revert to the
natural mass dictated by the fixtures. You can do this with:</p>
<pre><code class="hljs"><span class="hljs-comment">// on b2Body:</span>
<span class="hljs-keyword">public</span> <span class="hljs-title class_">ResetMassData</span>(): <span class="hljs-built_in">void</span>;
</code><code-copy-button role="button" code="// on b2Body:
public ResetMassData(): void;" title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<p>The body's mass data is available through the following functions:</p>
<pre><code class="hljs"><span class="hljs-comment">// on b2Body:</span>
<span class="hljs-keyword">public</span> <span class="hljs-title class_">GetMass</span>(): <span class="hljs-built_in">number</span>;
<span class="hljs-keyword">public</span> <span class="hljs-title class_">GetInertia</span>(): <span class="hljs-built_in">number</span>;
<span class="hljs-keyword">public</span> <span class="hljs-title class_">GetLocalCenter</span>(): b2Readonly&lt;b2Vec2&gt;;
<span class="hljs-keyword">public</span> <span class="hljs-title class_">GetMassData</span>(<span class="hljs-attr">data</span>: b2MassData): b2MassData;
</code><code-copy-button role="button" code="// on b2Body:
public GetMass(): number;
public GetInertia(): number;
public GetLocalCenter(): b2Readonly&lt;b2Vec2&gt;;
public GetMassData(data: b2MassData): b2MassData;" title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<h3>State Information</h3>
<p>There are many aspects to the body's state. You can access this state
data efficiently through the following functions:</p>
<pre><code class="hljs"><span class="hljs-comment">// on b2Body:</span>
<span class="hljs-keyword">public</span> <span class="hljs-title class_">SetType</span>(<span class="hljs-attr">type</span>: b2BodyType): <span class="hljs-built_in">void</span>;
<span class="hljs-keyword">public</span> <span class="hljs-title class_">GetType</span>(): b2BodyType;
<span class="hljs-keyword">public</span> <span class="hljs-title class_">SetBullet</span>(<span class="hljs-attr">flag</span>: <span class="hljs-built_in">boolean</span>): <span class="hljs-built_in">void</span>;
<span class="hljs-keyword">public</span> <span class="hljs-title class_">IsBullet</span>(): <span class="hljs-built_in">boolean</span>;
<span class="hljs-keyword">public</span> <span class="hljs-title class_">SetSleepingAllowed</span>(<span class="hljs-attr">flag</span>: <span class="hljs-built_in">boolean</span>): <span class="hljs-built_in">void</span>;
<span class="hljs-keyword">public</span> <span class="hljs-title class_">IsSleepingAllowed</span>(): <span class="hljs-built_in">boolean</span>;
<span class="hljs-keyword">public</span> <span class="hljs-title class_">SetAwake</span>(<span class="hljs-attr">flag</span>: <span class="hljs-built_in">boolean</span>): <span class="hljs-built_in">void</span>;
<span class="hljs-keyword">public</span> <span class="hljs-title class_">IsAwake</span>(): <span class="hljs-built_in">boolean</span>;
<span class="hljs-keyword">public</span> <span class="hljs-title class_">SetEnabled</span>(<span class="hljs-attr">flag</span>: <span class="hljs-built_in">boolean</span>): <span class="hljs-built_in">void</span>;
<span class="hljs-keyword">public</span> <span class="hljs-title class_">IsEnabled</span>(): <span class="hljs-built_in">boolean</span>;
<span class="hljs-keyword">public</span> <span class="hljs-title class_">SetFixedRotation</span>(<span class="hljs-attr">flag</span>: <span class="hljs-built_in">boolean</span>): <span class="hljs-built_in">void</span>;
<span class="hljs-keyword">public</span> <span class="hljs-title class_">IsFixedRotation</span>(): <span class="hljs-built_in">boolean</span>;
</code><code-copy-button role="button" code="// on b2Body:
public SetType(type: b2BodyType): void;
public GetType(): b2BodyType;
public SetBullet(flag: boolean): void;
public IsBullet(): boolean;
public SetSleepingAllowed(flag: boolean): void;
public IsSleepingAllowed(): boolean;
public SetAwake(flag: boolean): void;
public IsAwake(): boolean;
public SetEnabled(flag: boolean): void;
public IsEnabled(): boolean;
public SetFixedRotation(flag: boolean): void;
public IsFixedRotation(): boolean;" title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<h3>Position and Velocity</h3>
<p>You can access the position and rotation of a body. This is common when
rendering your associated game actor. You can also set the position,
although this is less common since you will normally use Box2D to
simulate movement.</p>
<pre><code class="hljs"><span class="hljs-comment">// on b2Body:</span>
<span class="hljs-keyword">public</span> <span class="hljs-title class_">SetTransformVec</span>(<span class="hljs-attr">position</span>: <span class="hljs-variable constant_">XY</span>, <span class="hljs-attr">angle</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">void</span>;
<span class="hljs-keyword">public</span> <span class="hljs-title class_">SetTransformXY</span>(<span class="hljs-attr">x</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">y</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">angle</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">void</span>
<span class="hljs-keyword">public</span> <span class="hljs-title class_">GetTransform</span>(): b2Readonly&lt;b2Transform&gt;;
<span class="hljs-keyword">public</span> <span class="hljs-title class_">GetPosition</span>(): b2Readonly&lt;b2Vec2&gt;;
<span class="hljs-keyword">public</span> <span class="hljs-title class_">GetAngle</span>(): <span class="hljs-built_in">number</span>;
</code><code-copy-button role="button" code="// on b2Body:
public SetTransformVec(position: XY, angle: number): void;
public SetTransformXY(x: number, y: number, angle: number): void
public GetTransform(): b2Readonly&lt;b2Transform&gt;;
public GetPosition(): b2Readonly&lt;b2Vec2&gt;;
public GetAngle(): number;" title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<p>You can access the center of mass position in local and world
coordinates. Much of the internal simulation in Box2D uses the center of
mass. However, you should normally not need to access it. Instead you
will usually work with the body transform. For example, you may have a
body that is square. The body origin might be a corner of the square,
while the center of mass is located at the center of the square.</p>
<pre><code class="hljs"><span class="hljs-keyword">public</span> <span class="hljs-title class_">GetWorldCenter</span>(): b2Readonly&lt;b2Vec2&gt;;
<span class="hljs-keyword">public</span> <span class="hljs-title class_">GetLocalCenter</span>(): b2Readonly&lt;b2Vec2&gt;;
</code><code-copy-button role="button" code="public GetWorldCenter(): b2Readonly&lt;b2Vec2&gt;;
public GetLocalCenter(): b2Readonly&lt;b2Vec2&gt;;" title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<p>You can access the linear and angular velocity. The linear velocity is
for the center of mass. Therefore, the linear velocity may change if the
mass properties change.</p>
<h3>Forces and Impulses</h3>
<p>You can apply forces, torques, and impulses to a body. When you apply a
force or an impulse, you provide a world point where the load is
applied. This often results in a torque about the center of mass.</p>
<pre><code class="hljs"><span class="hljs-keyword">public</span> <span class="hljs-title class_">ApplyForce</span>(<span class="hljs-attr">force</span>: <span class="hljs-variable constant_">XY</span>, <span class="hljs-attr">point</span>: <span class="hljs-variable constant_">XY</span>, wake = <span class="hljs-literal">true</span>): <span class="hljs-built_in">void</span>;
<span class="hljs-keyword">public</span> <span class="hljs-title class_">ApplyTorque</span>(<span class="hljs-attr">torque</span>: <span class="hljs-built_in">number</span>, wake = <span class="hljs-literal">true</span>): <span class="hljs-built_in">void</span>;
<span class="hljs-keyword">public</span> <span class="hljs-title class_">ApplyLinearImpulse</span>(<span class="hljs-attr">impulse</span>: <span class="hljs-variable constant_">XY</span>, <span class="hljs-attr">point</span>: <span class="hljs-variable constant_">XY</span>, wake = <span class="hljs-literal">true</span>): <span class="hljs-built_in">void</span>;
<span class="hljs-keyword">public</span> <span class="hljs-title class_">ApplyAngularImpulse</span>(<span class="hljs-attr">impulse</span>: <span class="hljs-built_in">number</span>, wake = <span class="hljs-literal">true</span>): <span class="hljs-built_in">void</span> ;
</code><code-copy-button role="button" code="public ApplyForce(force: XY, point: XY, wake = true): void;
public ApplyTorque(torque: number, wake = true): void;
public ApplyLinearImpulse(impulse: XY, point: XY, wake = true): void;
public ApplyAngularImpulse(impulse: number, wake = true): void ;" title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<p>Applying a force, torque, or impulse wakes the body. Sometimes this is
undesirable. For example, you may be applying a steady force and want to
allow the body to sleep to improve performance. In this case you can use
the following code.</p>
<pre><code class="hljs"><span class="hljs-keyword">if</span> (myBody.<span class="hljs-title class_">IsAwake</span>() === <span class="hljs-literal">true</span>) {
  myBody.<span class="hljs-title class_">ApplyForce</span>(myForce, myPoint);
}
</code><code-copy-button role="button" code="if (myBody.IsAwake() === true) {
  myBody.ApplyForce(myForce, myPoint);
}" title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<h3>Coordinate Transformations</h3>
<p>The body class has some utility functions to help you transform points
and vectors between local and world space. If you don't understand
these concepts, please read &quot;Essential Mathematics for Games and
Interactive Applications&quot; by Jim Van Verth and Lars Bishop. These
functions are efficient (when inlined).</p>
<pre><code class="hljs"><span class="hljs-keyword">public</span> <span class="hljs-title class_">GetWorldPoint</span>&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-variable constant_">XY</span>&gt;(<span class="hljs-attr">localPoint</span>: <span class="hljs-title class_">Readonly</span>&lt;<span class="hljs-variable constant_">XY</span>&gt;, <span class="hljs-attr">out</span>: T): T;
<span class="hljs-keyword">public</span> <span class="hljs-title class_">GetWorldVector</span>&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-variable constant_">XY</span>&gt;(<span class="hljs-attr">localVector</span>: <span class="hljs-title class_">Readonly</span>&lt;<span class="hljs-variable constant_">XY</span>&gt;, <span class="hljs-attr">out</span>: T): T;
<span class="hljs-keyword">public</span> <span class="hljs-title class_">GetLocalPoint</span>&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-variable constant_">XY</span>&gt;(<span class="hljs-attr">worldPoint</span>: <span class="hljs-title class_">Readonly</span>&lt;<span class="hljs-variable constant_">XY</span>&gt;, <span class="hljs-attr">out</span>: T): T;
<span class="hljs-keyword">public</span> <span class="hljs-title class_">GetLocalVector</span>&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-variable constant_">XY</span>&gt;(<span class="hljs-attr">worldVector</span>: <span class="hljs-title class_">Readonly</span>&lt;<span class="hljs-variable constant_">XY</span>&gt;, <span class="hljs-attr">out</span>: T): T;
</code><code-copy-button role="button" code="public GetWorldPoint&lt;T extends XY&gt;(localPoint: Readonly&lt;XY&gt;, out: T): T;
public GetWorldVector&lt;T extends XY&gt;(localVector: Readonly&lt;XY&gt;, out: T): T;
public GetLocalPoint&lt;T extends XY&gt;(worldPoint: Readonly&lt;XY&gt;, out: T): T;
public GetLocalVector&lt;T extends XY&gt;(worldVector: Readonly&lt;XY&gt;, out: T): T;" title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<h3>Acessing Fixtures, Joints, and Contacts</h3>
<p>You can iterate over a body's fixtures. This is mainly useful if you
need to access the fixture's user data.</p>
<pre><code class="hljs"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> <span class="hljs-attr">f</span>: b2Fixture | <span class="hljs-literal">null</span> = b.<span class="hljs-title class_">GetFixtureList</span>(); f; f = f.<span class="hljs-title class_">GetNext</span>()) {
  <span class="hljs-keyword">const</span> <span class="hljs-attr">data</span>: b2FixtureUserData = f.<span class="hljs-title class_">GetUserData</span>();
  <span class="hljs-comment">// do something with data ...</span>
}
</code><code-copy-button role="button" code="for (let f: b2Fixture | null = b.GetFixtureList(); f; f = f.GetNext()) {
  const data: b2FixtureUserData = f.GetUserData();
  // do something with data ...
}" title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<p>You can similarly iterate over the body's joint list.</p>
<p>The body also provides a list of associated contacts. You can use this
to get information about the current contacts. Be careful, because the
contact list may not contain all the contacts that existed during the
previous time step.</p>
<h2 id="fixtures">Fixtures</h2>
<p>Recall that shapes don't know about bodies and may be used independently
of the physics simulation. Therefore Box2D provides the b2Fixture class
to attach shapes to bodies. A body may have zero or more fixtures. A
body with multiple fixtures is sometimes called a <em>compound body.</em></p>
<p>Fixtures hold the following:</p>
<ul>
<li>a single shape</li>
<li>broad-phase proxies</li>
<li>density, friction, and restitution</li>
<li>collision filtering flags</li>
<li>back reference to the parent body</li>
<li>user data</li>
<li>sensor flag</li>
</ul>
<p>These are described in the following sections.</p>
<h3>Fixture Creation</h3>
<p>Fixtures are created by initializing a fixture definition and then
passing the definition to the parent body.</p>
<pre><code class="hljs"><span class="hljs-keyword">const</span> <span class="hljs-attr">myBody</span>: b2Body = ...;
<span class="hljs-keyword">const</span> <span class="hljs-attr">fixtureDef</span>: b2FixtureDef = {
    <span class="hljs-attr">shape</span>: myShape;
    <span class="hljs-attr">density</span>: <span class="hljs-number">1</span>,
};
<span class="hljs-keyword">const</span> <span class="hljs-attr">myFixture</span>: b2Fixture = myBody.<span class="hljs-title class_">CreateFixture</span>(fixtureDef);
</code><code-copy-button role="button" code="const myBody: b2Body = ...;
const fixtureDef: b2FixtureDef = {
    shape: myShape;
    density: 1,
};
const myFixture: b2Fixture = myBody.CreateFixture(fixtureDef);" title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<p>This creates the fixture and attaches it to the body. You do not need to
store the fixture reference since the fixture will automatically be
destroyed when the parent body is destroyed. You can create multiple
fixtures on a single body.</p>
<p>You can destroy a fixture on the parent body. You may do this to model a
breakable object. Otherwise you can just leave the fixture alone and let
the body destruction take care of destroying the attached fixtures.</p>
<pre><code class="hljs">myBody.<span class="hljs-title class_">DestroyFixture</span>(myFixture);
</code><code-copy-button role="button" code="myBody.DestroyFixture(myFixture);" title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<h3>Density</h3>
<p>The fixture density is used to compute the mass properties of the parent
body. The density can be zero or positive. You should generally use
similar densities for all your fixtures. This will improve stacking
stability.</p>
<p>The mass of a body is not adjusted when you set the density. You must
call ResetMassData for this to occur.</p>
<pre><code class="hljs"><span class="hljs-keyword">const</span> <span class="hljs-attr">fixture</span>: b2Fixture = ...;
fixture.<span class="hljs-title class_">SetDensity</span>(<span class="hljs-number">5</span>);
<span class="hljs-keyword">const</span> <span class="hljs-attr">body</span>: b2Body = ...;
body.<span class="hljs-title class_">ResetMassData</span>();
</code><code-copy-button role="button" code="const fixture: b2Fixture = ...;
fixture.SetDensity(5);
const body: b2Body = ...;
body.ResetMassData();" title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<h3>Friction</h3>
<p>Friction is used to make objects slide along each other realistically.
Box2D supports static and dynamic friction, but uses the same parameter
for both. Friction is simulated accurately in Box2D and the friction
strength is proportional to the normal force (this is called Coulomb
friction). The friction parameter is usually set between 0 and 1, but
can be any non-negative value. A friction value of 0 turns off friction
and a value of 1 makes the friction strong. When the friction force is
computed between two shapes, Box2D must combine the friction parameters
of the two parent fixtures. This is done with the geometric mean:</p>
<pre><code class="hljs"><span class="hljs-keyword">const</span> <span class="hljs-attr">fixtureA</span>: b2Fixture = ...;
<span class="hljs-keyword">const</span> <span class="hljs-attr">fixtureB</span>: b2Fixture = ...;

<span class="hljs-keyword">const</span> <span class="hljs-attr">friction</span>: <span class="hljs-built_in">number</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sqrt</span>(fixtureA.<span class="hljs-property">friction</span> * fixtureB.<span class="hljs-property">friction</span>);
</code><code-copy-button role="button" code="const fixtureA: b2Fixture = ...;
const fixtureB: b2Fixture = ...;

const friction: number = Math.sqrt(fixtureA.friction * fixtureB.friction);" title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<p>So if one fixture has zero friction then the contact will have zero
friction.</p>
<p>You can override the default mixed friction using
<code>b2Contact::SetFriction</code>. This is usually done in the <code>b2ContactListener</code>
callback.</p>
<h3>Restitution</h3>
<p>Restitution is used to make objects bounce. The restitution value is
usually set to be between 0 and 1. Consider dropping a ball on a table.
A value of zero means the ball won't bounce. This is called an
inelastic collision. A value of one means the ball's velocity will be
exactly reflected. This is called a perfectly elastic collision.
Restitution is combined using the following formula.</p>
<pre><code class="hljs"><span class="hljs-keyword">const</span> <span class="hljs-attr">fixtureA</span>: b2Fixture = ...;
<span class="hljs-keyword">const</span> <span class="hljs-attr">fixtureB</span>: b2Fixture = ...;
<span class="hljs-keyword">const</span> <span class="hljs-attr">restitution</span>: <span class="hljs-built_in">number</span> = <span class="hljs-title function_">b2Max</span>(fixtureA.<span class="hljs-property">restitution</span>, fixtureB.<span class="hljs-property">restitution</span>);
</code><code-copy-button role="button" code="const fixtureA: b2Fixture = ...;
const fixtureB: b2Fixture = ...;
const restitution: number = b2Max(fixtureA.restitution, fixtureB.restitution);" title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<p>Restitution is combined this way so that you can have a bouncy super
ball without having a bouncy floor.</p>
<p>You can override the default mixed restitution using
<code>b2Contact::SetRestitution</code>. This is usually done in the b2ContactListener
callback.</p>
<p>When a shape develops multiple contacts, restitution is simulated
approximately. This is because Box2D uses an iterative solver. Box2D
also uses inelastic collisions when the collision velocity is small.
This is done to prevent jitter. See <code>b2ContactVelocityConstraint::threshold</code>.</p>
<h3>Filtering</h3>
<p>Collision filtering allows you to prevent collision between fixtures.
For example, say you make a character that rides a bicycle. You want the
bicycle to collide with the terrain and the character to collide with
the terrain, but you don't want the character to collide with the
bicycle (because they must overlap). Box2D supports such collision
filtering using categories and groups.</p>
<p>Box2D supports 16 collision categories. For each fixture you can specify
which category it belongs to. You also specify what other categories
this fixture can collide with. For example, you could specify in a
multiplayer game that all players don't collide with each other and
monsters don't collide with each other, but players and monsters should
collide. This is done with masking bits. For example:</p>
<pre><code class="hljs"><span class="hljs-keyword">const</span> <span class="hljs-attr">playerFixtureDef</span>: b2FixtureDef = {
  <span class="hljs-attr">categoryBits</span>: <span class="hljs-number">0x0002</span>,
  <span class="hljs-attr">maskBits</span>: <span class="hljs-number">0x0004</span>,
};
<span class="hljs-keyword">const</span> <span class="hljs-attr">monsterFixtureDef</span>: b2FixtureDef = {
  <span class="hljs-attr">categoryBits</span>: <span class="hljs-number">0x0004</span>,
  <span class="hljs-attr">maskBits</span>: <span class="hljs-number">0x0002</span>,
};
</code><code-copy-button role="button" code="const playerFixtureDef: b2FixtureDef = {
  categoryBits: 0x0002,
  maskBits: 0x0004,
};
const monsterFixtureDef: b2FixtureDef = {
  categoryBits: 0x0004,
  maskBits: 0x0002,
};" title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<p>Here is the rule for a collision to occur:</p>
<pre><code class="hljs"><span class="hljs-keyword">const</span> <span class="hljs-attr">catA</span>: <span class="hljs-built_in">number</span> = fixtureA.<span class="hljs-property">filter</span>.<span class="hljs-property">categoryBits</span>;
<span class="hljs-keyword">const</span> <span class="hljs-attr">maskA</span>: <span class="hljs-built_in">number</span> = fixtureA.<span class="hljs-property">filter</span>.<span class="hljs-property">maskBits</span>;
<span class="hljs-keyword">const</span> <span class="hljs-attr">catB</span>: <span class="hljs-built_in">number</span> = fixtureB.<span class="hljs-property">filter</span>.<span class="hljs-property">categoryBits</span>;
<span class="hljs-keyword">const</span> <span class="hljs-attr">maskB</span>: <span class="hljs-built_in">number</span> = fixtureB.<span class="hljs-property">filter</span>.<span class="hljs-property">maskBits</span>;

<span class="hljs-keyword">if</span> ((catA &amp; maskB) !== <span class="hljs-number">0</span> &amp;&amp; (catB &amp; maskA) !== <span class="hljs-number">0</span>) {
  <span class="hljs-comment">// fixtures can collide</span>
}
</code><code-copy-button role="button" code="const catA: number = fixtureA.filter.categoryBits;
const maskA: number = fixtureA.filter.maskBits;
const catB: number = fixtureB.filter.categoryBits;
const maskB: number = fixtureB.filter.maskBits;

if ((catA &amp; maskB) !== 0 &amp;&amp; (catB &amp; maskA) !== 0) {
  // fixtures can collide
}" title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<p>Collision groups let you specify an integral group index. You can have
all fixtures with the same group index always collide (positive index)
or never collide (negative index). Group indices are usually used for
things that are somehow related, like the parts of a bicycle. In the
following example, fixture1 and fixture2 always collide, but fixture3
and fixture4 never collide.</p>
<pre><code class="hljs">fixture1Def.<span class="hljs-property">filter</span>.<span class="hljs-property">groupIndex</span> = <span class="hljs-number">2</span>;
fixture2Def.<span class="hljs-property">filter</span>.<span class="hljs-property">groupIndex</span> = <span class="hljs-number">2</span>;
fixture3Def.<span class="hljs-property">filter</span>.<span class="hljs-property">groupIndex</span> = -<span class="hljs-number">8</span>;
fixture4Def.<span class="hljs-property">filter</span>.<span class="hljs-property">groupIndex</span> = -<span class="hljs-number">8</span>;
</code><code-copy-button role="button" code="fixture1Def.filter.groupIndex = 2;
fixture2Def.filter.groupIndex = 2;
fixture3Def.filter.groupIndex = -8;
fixture4Def.filter.groupIndex = -8;" title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<p>Collisions between fixtures of different group indices are filtered
according the category and mask bits. In other words, group filtering
has higher precedence than category filtering.</p>
<p>Note that additional collision filtering occurs in Box2D. Here is a
list:</p>
<ul>
<li>A fixture on a static body can only collide with a dynamic body.</li>
<li>A fixture on a kinematic body can only collide with a dynamic body.</li>
<li>Fixtures on the same body never collide with each other.</li>
<li>You can optionally enable/disable collision between fixtures on bodies connected by a joint.</li>
</ul>
<p>Sometimes you might need to change collision filtering after a fixture
has already been created. You can get and set the b2Filter class on
an existing fixture using <code>b2Fixture::GetFilterData</code> and
<code>b2Fixture::SetFilterData</code>. Note that changing the filter data will not
add or remove contacts until the next time step (see the World class).</p>
<h3>Sensors</h3>
<p>Sometimes game logic needs to know when two fixtures overlap yet there
should be no collision response. This is done by using sensors. A sensor
is a fixture that detects collision but does not produce a response.</p>
<p>You can flag any fixture as being a sensor. Sensors may be static,
kinematic, or dynamic. Remember that you may have multiple fixtures per
body and you can have any mix of sensors and solid fixtures. Also,
sensors only form contacts when at least one body is dynamic, so you
will not get a contact for kinematic versus kinematic, kinematic versus
static, or static versus static.</p>
<p>Sensors do not generate contact points. There are two ways to get the
state of a sensor:</p>
<ol>
<li><code>b2Contact::IsTouching</code></li>
<li><code>b2ContactListener::BeginContact</code> and <code>b2ContactListener::EndContact</code></li>
</ol>
<h2 id="joints">Joints</h2>
<p>Joints are used to constrain bodies to the world or to each other.
Typical examples in games include ragdolls, teeters, and pulleys. Joints
can be combined in many different ways to create interesting motions.</p>
<p>Some joints provide limits so you can control the range of motion. Some
joint provide motors which can be used to drive the joint at a
prescribed speed until a prescribed force/torque is exceeded.</p>
<p>Joint motors can be used in many ways. You can use motors to control
position by specifying a joint velocity that is proportional to the
difference between the actual and desired position. You can also use
motors to simulate joint friction: set the joint velocity to zero and
provide a small, but significant maximum motor force/torque. Then the
motor will attempt to keep the joint from moving until the load becomes
too strong.</p>
<h3>Joint Definition</h3>
<p>Each joint type has a definition that derives from b2JointDef. All
joints are connected between two different bodies. One body may be static.
Joints between static and/or kinematic bodies are allowed, but have no
effect and use some processing time.</p>
<p>You can specify user data for any joint type and you can provide a flag
to prevent the attached bodies from colliding with each other. This is
actually the default behavior and you must set the collideConnected
boolean to allow collision between to connected bodies.</p>
<p>Many joint definitions require that you provide some geometric data.
Often a joint will be defined by anchor points. These are points fixed
in the attached bodies. Box2D requires these points to be specified in
local coordinates. This way the joint can be specified even when the
current body transforms violate the joint constraint --- a common
occurrence when a game is saved and reloaded. Additionally, some joint
definitions need to know the default relative angle between the bodies.
This is necessary to constrain rotation correctly.</p>
<p>Initializing the geometric data can be tedious, so many joints have
initialization functions that use the current body transforms to remove
much of the work. However, these initialization functions should usually
only be used for prototyping. Production code should define the geometry
directly. This will make joint behavior more robust.</p>
<p>The rest of the joint definition data depends on the joint type. We
cover these now.</p>
<h3>Joint Factory</h3>
<p>Joints are created and destroyed using the world factory methods. This
brings up an old issue:</p>
<blockquote>
<p><strong>Caution</strong>:
Don't try to create a joint using new.
You must create and destroy bodies and joints using the create
and destroy methods of the b2World class.</p>
</blockquote>
<p>Here's an example of the lifetime of a revolute joint:</p>
<pre><code class="hljs"><span class="hljs-keyword">const</span> <span class="hljs-attr">myWorld</span>: b2World = ...;
<span class="hljs-keyword">const</span> jointDef = <span class="hljs-keyword">new</span> <span class="hljs-title function_">b2RevoluteJointDef</span>();
jointDef.<span class="hljs-title function_">initialize</span>(myBodyA, myBodyB, myBodyA.<span class="hljs-title class_">GetCenterPosition</span>());

<span class="hljs-keyword">const</span> <span class="hljs-attr">joint</span>: b2RevoluteJoint = myWorld.<span class="hljs-title class_">CreateJoint</span>(jointDef);

<span class="hljs-comment">// ... do stuff ...</span>

myWorld.<span class="hljs-title class_">DestroyJoint</span>(joint);
<span class="hljs-comment">// stop using the joint from this point on!</span>
</code><code-copy-button role="button" code="const myWorld: b2World = ...;
const jointDef = new b2RevoluteJointDef();
jointDef.initialize(myBodyA, myBodyB, myBodyA.GetCenterPosition());

const joint: b2RevoluteJoint = myWorld.CreateJoint(jointDef);

// ... do stuff ...

myWorld.DestroyJoint(joint);
// stop using the joint from this point on!" title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<p>It is always good to remove your reference after they are destroyed. This
will make the program behave unexpectedly if you try to reuse
the reference.</p>
<p>The lifetime of a joint is not simple. Heed this warning well:</p>
<blockquote>
<p><strong>Caution</strong>:
Joints are destroyed when an attached body is destroyed.</p>
</blockquote>
<p>This precaution is not always necessary. You may organize your game
engine so that joints are always destroyed before the attached bodies.
In this case you don't need to implement the listener class. See the
section on Implicit Destruction for details.</p>
<h3>Using Joints</h3>
<p>Many simulations create the joints and don't access them again until
they are destroyed. However, there is a lot of useful data contained in
joints that you can use to create a rich simulation.</p>
<p>First of all, you can get the bodies, anchor points, and user data from
a joint.</p>
<pre><code class="hljs"><span class="hljs-comment">// on b2Joint:</span>
<span class="hljs-keyword">public</span> <span class="hljs-title class_">GetBodyA</span>(): b2Body;
<span class="hljs-keyword">public</span> <span class="hljs-title class_">GetBodyB</span>(): bn2Body;
<span class="hljs-keyword">public</span> <span class="hljs-title class_">GetAnchorA</span>&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-variable constant_">XY</span>&gt;(<span class="hljs-attr">out</span>: T): T;
<span class="hljs-keyword">public</span> <span class="hljs-title class_">GetAnchorB</span>&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-variable constant_">XY</span>&gt;(<span class="hljs-attr">out</span>: T): T;
<span class="hljs-keyword">public</span> <span class="hljs-title class_">GetUserData</span>(): b2JointUserData;
</code><code-copy-button role="button" code="// on b2Joint:
public GetBodyA(): b2Body;
public GetBodyB(): bn2Body;
public GetAnchorA&lt;T extends XY&gt;(out: T): T;
public GetAnchorB&lt;T extends XY&gt;(out: T): T;
public GetUserData(): b2JointUserData;" title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<p>All joints have a reaction force and torque. This the reaction force
applied to body 2 at the anchor point. You can use reaction forces to
break joints or trigger other game events. These functions may do some
computations, so don't call them if you don't need the result.</p>
<pre><code class="hljs"><span class="hljs-keyword">public</span> <span class="hljs-title class_">GetReactionForce</span>&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-variable constant_">XY</span>&gt;(<span class="hljs-attr">inv_dt</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">out</span>: T): T;
<span class="hljs-keyword">public</span> <span class="hljs-title class_">GetReactionTorque</span>(<span class="hljs-attr">inv_dt</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">number</span>;
</code><code-copy-button role="button" code="public GetReactionForce&lt;T extends XY&gt;(inv_dt: number, out: T): T;
public GetReactionTorque(inv_dt: number): number;" title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<h3>Distance Joint</h3>
<p>One of the simplest joint is a distance joint which says that the
distance between two points on two bodies must be constant. When you
specify a distance joint the two bodies should already be in place. Then
you specify the two anchor points in world coordinates. The first anchor
point is connected to body 1, and the second anchor point is connected
to body 2. These points imply the length of the distance constraint.</p>
<p><img src="https://lusito.github.io/box2d.ts/assets/distance_joint-f9e16c00.gif" alt="Distance Joint"></p>
<p>Here is an example of a distance joint definition. In this case we
decide to allow the bodies to collide.</p>
<pre><code class="hljs"><span class="hljs-keyword">const</span> jointDef = <span class="hljs-keyword">new</span> <span class="hljs-title function_">b2DistanceJointDef</span>();
jointDef.<span class="hljs-title class_">Initialize</span>(myBodyA, myBodyB, worldAnchorOnBodyA, worldAnchorOnBodyB);
jointDef.<span class="hljs-property">collideConnected</span> = <span class="hljs-literal">true</span>;
</code><code-copy-button role="button" code="const jointDef = new b2DistanceJointDef();
jointDef.Initialize(myBodyA, myBodyB, worldAnchorOnBodyA, worldAnchorOnBodyB);
jointDef.collideConnected = true;" title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<p>The distance joint can also be made soft, like a spring-damper
connection. See the Web example in the testbed to see how this behaves.</p>
<p>Softness is achieved by tuning two constants in the definition:
stiffness and damping. It can be non-intuitive setting these values directly
since they have units in terms on Newtons. Box2D provides an API to compute
these values in terms of frequency and damping ratio.</p>
<pre><code class="hljs"><span class="hljs-keyword">function</span> <span class="hljs-title function_">b2LinearStiffness</span>(<span class="hljs-params">
  def: { stiffness: <span class="hljs-built_in">number</span>; damping: <span class="hljs-built_in">number</span> },
  frequencyHertz: <span class="hljs-built_in">number</span>,
  dampingRatio: <span class="hljs-built_in">number</span>,
  bodyA: b2Body,
  bodyB: b2Body,
</span>): <span class="hljs-built_in">void</span>;
</code><code-copy-button role="button" code="function b2LinearStiffness(
  def: { stiffness: number; damping: number },
  frequencyHertz: number,
  dampingRatio: number,
  bodyA: b2Body,
  bodyB: b2Body,
): void;" title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<p>Think of the frequency as the frequency of a harmonic oscillator (like a
guitar string). The frequency is specified in Hertz. Typically the frequency
should be less than a half the frequency of the time step. So if you are using
a 60Hz time step, the frequency of the distance joint should be less than 30Hz.
The reason is related to the Nyquist frequency.</p>
<p>The damping ratio is non-dimensional and is typically between 0 and 1,
but can be larger. At 1, the damping is critical (all oscillations
should vanish).</p>
<pre><code class="hljs"><span class="hljs-keyword">const</span> frequencyHz = <span class="hljs-number">4</span>;
<span class="hljs-keyword">const</span> dampingRatio = <span class="hljs-number">0.5</span>;
<span class="hljs-title function_">b2LinearStiffness</span>(jointDef, frequencyHz, dampingRatio, jointDef.<span class="hljs-property">bodyA</span>, jointDef.<span class="hljs-property">bodyB</span>);
</code><code-copy-button role="button" code="const frequencyHz = 4;
const dampingRatio = 0.5;
b2LinearStiffness(jointDef, frequencyHz, dampingRatio, jointDef.bodyA, jointDef.bodyB);" title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<p>It is also possible to define a minimum and maximum length for the distance joint.
See <code>b2DistanceJointDef</code> for details.</p>
<h3>Revolute Joint</h3>
<p>A revolute joint forces two bodies to share a common anchor point, often
called a hinge point. The revolute joint has a single degree of freedom:
the relative rotation of the two bodies. This is called the joint angle.</p>
<p><img src="https://lusito.github.io/box2d.ts/assets/revolute_joint-7beb0170.gif" alt="Revolute Joint"></p>
<p>To specify a revolute you need to provide two bodies and a single anchor
point in world space. The initialization function assumes that the
bodies are already in the correct position.</p>
<p>In this example, two bodies are connected by a revolute joint at the
first body's center of mass.</p>
<pre><code class="hljs"><span class="hljs-keyword">const</span> jointDef = <span class="hljs-keyword">new</span> <span class="hljs-title function_">b2RevoluteJointDef</span>();
jointDef.<span class="hljs-title class_">Initialize</span>(myBodyA, myBodyB, myBodyA.<span class="hljs-title class_">GetWorldCenter</span>());
</code><code-copy-button role="button" code="const jointDef = new b2RevoluteJointDef();
jointDef.Initialize(myBodyA, myBodyB, myBodyA.GetWorldCenter());" title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<p>The revolute joint angle is positive when bodyB rotates CCW about the
angle point. Like all angles in Box2D, the revolute angle is measured in
radians. By convention the revolute joint angle is zero when the joint
is created using Initialize(), regardless of the current rotation of the
two bodies.</p>
<p>In some cases you might wish to control the joint angle. For this, the
revolute joint can optionally simulate a joint limit and/or a motor.</p>
<p>A joint limit forces the joint angle to remain between a lower and upper
bound. The limit will apply as much torque as needed to make this
happen. The limit range should include zero, otherwise the joint will
lurch when the simulation begins.</p>
<p>A joint motor allows you to specify the joint speed (the time derivative
of the angle). The speed can be negative or positive. A motor can have
infinite force, but this is usually not desirable. Recall the eternal
question:</p>
<blockquote>
<p><em>What happens when an irresistible force meets an immovable object?</em></p>
</blockquote>
<p>I can tell you it's not pretty. So you can provide a maximum torque for
the joint motor. The joint motor will maintain the specified speed
unless the required torque exceeds the specified maximum. When the
maximum torque is exceeded, the joint will slow down and can even
reverse.</p>
<p>You can use a joint motor to simulate joint friction. Just set the joint
speed to zero, and set the maximum torque to some small, but significant
value. The motor will try to prevent the joint from rotating, but will
yield to a significant load.</p>
<p>Here's a revision of the revolute joint definition above; this time the
joint has a limit and a motor enabled. The motor is setup to simulate
joint friction.</p>
<pre><code class="hljs"><span class="hljs-keyword">const</span> jointDef = <span class="hljs-keyword">new</span> <span class="hljs-title function_">b2RevoluteJointDef</span>();
jointDef.<span class="hljs-title class_">Initialize</span>(bodyA, bodyB, myBodyA.<span class="hljs-title class_">GetWorldCenter</span>());
jointDef.<span class="hljs-property">lowerAngle</span> = -<span class="hljs-number">0.5</span> * <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span>; <span class="hljs-comment">// -90 degrees</span>
jointDef.<span class="hljs-property">upperAngle</span> = <span class="hljs-number">0.25</span> * <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span>; <span class="hljs-comment">// 45 degrees</span>
jointDef.<span class="hljs-property">enableLimit</span> = <span class="hljs-literal">true</span>;
jointDef.<span class="hljs-property">maxMotorTorque</span> = <span class="hljs-number">10.0</span>;
jointDef.<span class="hljs-property">motorSpeed</span> = <span class="hljs-number">0.0</span>;
jointDef.<span class="hljs-property">enableMotor</span> = <span class="hljs-literal">true</span>;
</code><code-copy-button role="button" code="const jointDef = new b2RevoluteJointDef();
jointDef.Initialize(bodyA, bodyB, myBodyA.GetWorldCenter());
jointDef.lowerAngle = -0.5 * Math.PI; // -90 degrees
jointDef.upperAngle = 0.25 * Math.PI; // 45 degrees
jointDef.enableLimit = true;
jointDef.maxMotorTorque = 10.0;
jointDef.motorSpeed = 0.0;
jointDef.enableMotor = true;" title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<p>You can access a revolute joint's angle, speed, and motor torque.</p>
<pre><code class="hljs"><span class="hljs-comment">// on b2RevoluteJoint:</span>
<span class="hljs-keyword">public</span> <span class="hljs-title class_">GetJointAngle</span>(): <span class="hljs-built_in">number</span>;
<span class="hljs-keyword">public</span> <span class="hljs-title class_">GetJointSpeed</span>(): <span class="hljs-built_in">number</span>;
<span class="hljs-keyword">public</span> <span class="hljs-title class_">GetMotorTorque</span>(<span class="hljs-attr">inv_dt</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">number</span>;
</code><code-copy-button role="button" code="// on b2RevoluteJoint:
public GetJointAngle(): number;
public GetJointSpeed(): number;
public GetMotorTorque(inv_dt: number): number;" title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<p>You also update the motor parameters each step.</p>
<pre><code class="hljs"><span class="hljs-comment">// on b2RevoluteJoint:</span>
<span class="hljs-keyword">public</span> <span class="hljs-title class_">SetMotorSpeed</span>(<span class="hljs-attr">speed</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">number</span>;
<span class="hljs-keyword">public</span> <span class="hljs-title class_">SetMaxMotorTorque</span>(<span class="hljs-attr">torque</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">void</span>;
</code><code-copy-button role="button" code="// on b2RevoluteJoint:
public SetMotorSpeed(speed: number): number;
public SetMaxMotorTorque(torque: number): void;" title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<p>Joint motors have some interesting abilities. You can update the joint
speed every time step so you can make the joint move back-and-forth like
a sine-wave or according to whatever function you want.</p>
<pre><code class="hljs"><span class="hljs-comment">// ... Game Loop Begin ...</span>

myJoint.<span class="hljs-title class_">SetMotorSpeed</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">cos</span>(<span class="hljs-number">0.5</span> * time));

<span class="hljs-comment">// ... Game Loop End ...</span>
</code><code-copy-button role="button" code="// ... Game Loop Begin ...

myJoint.SetMotorSpeed(Math.cos(0.5 * time));

// ... Game Loop End ..." title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<p>You can also use joint motors to track a desired joint angle. For example:</p>
<pre><code class="hljs"><span class="hljs-comment">// ... Game Loop Begin ...</span>

<span class="hljs-keyword">const</span> angleError = myJoint.<span class="hljs-title class_">GetJointAngle</span>() - angleTarget;
<span class="hljs-keyword">const</span> gain = <span class="hljs-number">0.1</span>;
myJoint.<span class="hljs-title class_">SetMotorSpeed</span>(-gain * angleError);

<span class="hljs-comment">// ... Game Loop End ...</span>
</code><code-copy-button role="button" code="// ... Game Loop Begin ...

const angleError = myJoint.GetJointAngle() - angleTarget;
const gain = 0.1;
myJoint.SetMotorSpeed(-gain * angleError);

// ... Game Loop End ..." title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<p>Generally your gain parameter should not be too large. Otherwise your
joint may become unstable.</p>
<h3>Prismatic Joint</h3>
<p>A prismatic joint allows for relative translation of two bodies along a
specified axis. A prismatic joint prevents relative rotation. Therefore,
a prismatic joint has a single degree of freedom.</p>
<p><img src="https://lusito.github.io/box2d.ts/assets/prismatic_joint-48d11023.gif" alt="Prismatic Joint"></p>
<p>The prismatic joint definition is similar to the revolute joint
description; just substitute translation for angle and force for torque.
Using this analogy provides an example prismatic joint definition with a
joint limit and a friction motor:</p>
<pre><code class="hljs"><span class="hljs-keyword">const</span> jointDef = <span class="hljs-keyword">new</span> <span class="hljs-title function_">b2PrismaticJointDef</span>();
<span class="hljs-keyword">const</span> <span class="hljs-attr">worldAxis</span>: <span class="hljs-variable constant_">XY</span> = { <span class="hljs-attr">x</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span> };
jointDef.<span class="hljs-title class_">Initialize</span>(myBodyA, myBodyB, myBodyA.<span class="hljs-title class_">GetWorldCenter</span>(), worldAxis);
jointDef.<span class="hljs-property">lowerTranslation</span> = -<span class="hljs-number">5</span>;
jointDef.<span class="hljs-property">upperTranslation</span> = <span class="hljs-number">2.5</span>;
jointDef.<span class="hljs-property">enableLimit</span> = <span class="hljs-literal">true</span>;
jointDef.<span class="hljs-property">maxMotorForce</span> = <span class="hljs-number">1</span>;
jointDef.<span class="hljs-property">motorSpeed</span> = <span class="hljs-number">0</span>;
jointDef.<span class="hljs-property">enableMotor</span> = <span class="hljs-literal">true</span>;
</code><code-copy-button role="button" code="const jointDef = new b2PrismaticJointDef();
const worldAxis: XY = { x: 1, y: 0 };
jointDef.Initialize(myBodyA, myBodyB, myBodyA.GetWorldCenter(), worldAxis);
jointDef.lowerTranslation = -5;
jointDef.upperTranslation = 2.5;
jointDef.enableLimit = true;
jointDef.maxMotorForce = 1;
jointDef.motorSpeed = 0;
jointDef.enableMotor = true;" title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<p>The revolute joint has an implicit axis coming out of the screen. The
prismatic joint needs an explicit axis parallel to the screen. This axis
is fixed in the two bodies and follows their motion.</p>
<p>Like the revolute joint, the prismatic joint translation is zero when
the joint is created using Initialize(). So be sure zero is between your
lower and upper translation limits.</p>
<p>Using a prismatic joint is similar to using a revolute joint. Here are
the relevant member functions:</p>
<pre><code class="hljs"><span class="hljs-comment">// on b2PrismaticJoint</span>
<span class="hljs-keyword">public</span> <span class="hljs-title class_">GetJointTranslation</span>(): <span class="hljs-built_in">number</span>;
<span class="hljs-keyword">public</span> <span class="hljs-title class_">GetJointSpeed</span>(): <span class="hljs-built_in">number</span>;
<span class="hljs-keyword">public</span> <span class="hljs-title class_">GetMotorForce</span>(<span class="hljs-attr">inv_dt</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">number</span>;
<span class="hljs-keyword">public</span> <span class="hljs-title class_">SetMotorSpeed</span>(<span class="hljs-attr">speed</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">number</span>;
<span class="hljs-keyword">public</span> <span class="hljs-title class_">SetMaxMotorForce</span>(<span class="hljs-attr">force</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">void</span>;
</code><code-copy-button role="button" code="// on b2PrismaticJoint
public GetJointTranslation(): number;
public GetJointSpeed(): number;
public GetMotorForce(inv_dt: number): number;
public SetMotorSpeed(speed: number): number;
public SetMaxMotorForce(force: number): void;" title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<h3>Pulley Joint</h3>
<p>A pulley is used to create an idealized pulley. The pulley connects two
bodies to ground and to each other. As one body goes up, the other goes
down. The total length of the pulley rope is conserved according to the
initial configuration.</p>
<pre><code class="hljs">length1 + length2 === constant;
</code><code-copy-button role="button" code="length1 + length2 === constant;" title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<p>You can supply a ratio that simulates a block and tackle. This causes
one side of the pulley to extend faster than the other. At the same time
the constraint force is smaller on one side than the other. You can use
this to create mechanical leverage.</p>
<pre><code class="hljs">length1 + ratio * length2 === constant;
</code><code-copy-button role="button" code="length1 + ratio * length2 === constant;" title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<p>For example, if the ratio is 2, then length1 will vary at twice the rate
of length2. Also the force in the rope attached to body1 will have half
the constraint force as the rope attached to body2.</p>
<p><img src="https://lusito.github.io/box2d.ts/assets/pulley_joint-815e629f.gif" alt="Pulley Joint"></p>
<p>Pulleys can be troublesome when one side is fully extended. The rope on
the other side will have zero length. At this point the constraint
equations become singular (bad). You should configure collision shapes
to prevent this.</p>
<p>Here is an example pulley definition:</p>
<pre><code class="hljs"><span class="hljs-keyword">const</span> anchor1 = myBody1.<span class="hljs-title class_">GetWorldCenter</span>();
<span class="hljs-keyword">const</span> anchor2 = myBody2.<span class="hljs-title class_">GetWorldCenter</span>();

<span class="hljs-keyword">const</span> <span class="hljs-attr">groundAnchor1</span>: <span class="hljs-variable constant_">XY</span> = { <span class="hljs-attr">x</span>: p1.<span class="hljs-property">x</span>, <span class="hljs-attr">y</span>: p1.<span class="hljs-property">y</span> + <span class="hljs-number">10</span> };
<span class="hljs-keyword">const</span> <span class="hljs-attr">groundAnchor2</span>: <span class="hljs-variable constant_">XY</span> = { <span class="hljs-attr">x</span>: p2.<span class="hljs-property">x</span>, <span class="hljs-attr">y</span>: p2.<span class="hljs-property">y</span> + <span class="hljs-number">12</span> };

<span class="hljs-keyword">const</span> ratio = <span class="hljs-number">1</span>;

<span class="hljs-keyword">const</span> jointDef = <span class="hljs-keyword">new</span> <span class="hljs-title function_">b2PulleyJointDef</span>();
jointDef.<span class="hljs-title class_">Initialize</span>(myBody1, myBody2, groundAnchor1, groundAnchor2, anchor1, anchor2, ratio);
</code><code-copy-button role="button" code="const anchor1 = myBody1.GetWorldCenter();
const anchor2 = myBody2.GetWorldCenter();

const groundAnchor1: XY = { x: p1.x, y: p1.y + 10 };
const groundAnchor2: XY = { x: p2.x, y: p2.y + 12 };

const ratio = 1;

const jointDef = new b2PulleyJointDef();
jointDef.Initialize(myBody1, myBody2, groundAnchor1, groundAnchor2, anchor1, anchor2, ratio);" title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<p>Pulley joints provide the current lengths.</p>
<pre><code class="hljs"><span class="hljs-comment">// on b2PulleyJoint:</span>
<span class="hljs-keyword">public</span> <span class="hljs-title class_">GetLengthA</span>(): <span class="hljs-built_in">number</span>;
<span class="hljs-keyword">public</span> <span class="hljs-title class_">GetLengthB</span>(): <span class="hljs-built_in">number</span>;
</code><code-copy-button role="button" code="// on b2PulleyJoint:
public GetLengthA(): number;
public GetLengthB(): number;" title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<h3>Gear Joint</h3>
<p>If you want to create a sophisticated mechanical contraption you might
want to use gears. In principle you can create gears in Box2D by using
compound shapes to model gear teeth. This is not very efficient and
might be tedious to author. You also have to be careful to line up the
gears so the teeth mesh smoothly. Box2D has a simpler method of creating
gears: the gear joint.</p>
<p><img src="https://lusito.github.io/box2d.ts/assets/gear_joint-50db2bfe.gif" alt="Gear Joint"></p>
<p>The gear joint can only connect revolute and/or prismatic joints.</p>
<p>Like the pulley ratio, you can specify a gear ratio. However, in this
case the gear ratio can be negative. Also keep in mind that when one
joint is a revolute joint (angular) and the other joint is prismatic
(translation), and then the gear ratio will have units of length or one
over length.</p>
<pre><code class="hljs">coordinate1 + ratio * coordinate2 === constant;
</code><code-copy-button role="button" code="coordinate1 + ratio * coordinate2 === constant;" title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<p>Here is an example gear joint. The bodies myBodyA and myBodyB are any
bodies from the two joints, as long as they are not the same bodies.</p>
<pre><code class="hljs"><span class="hljs-keyword">const</span> jointDef = <span class="hljs-keyword">new</span> <span class="hljs-title function_">b2GearJointDef</span>();
jointDef.<span class="hljs-property">bodyA</span> = myBodyA;
jointDef.<span class="hljs-property">bodyB</span> = myBodyB;
jointDef.<span class="hljs-property">joint1</span> = myRevoluteJoint;
jointDef.<span class="hljs-property">joint2</span> = myPrismaticJoint;
jointDef.<span class="hljs-property">ratio</span> = (<span class="hljs-number">2</span> * <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span>) / myLength;
</code><code-copy-button role="button" code="const jointDef = new b2GearJointDef();
jointDef.bodyA = myBodyA;
jointDef.bodyB = myBodyB;
jointDef.joint1 = myRevoluteJoint;
jointDef.joint2 = myPrismaticJoint;
jointDef.ratio = (2 * Math.PI) / myLength;" title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<p>Note that the gear joint depends on two other joints. This creates a
fragile situation. What happens if those joints are destroyed?</p>
<blockquote>
<p><strong>Caution</strong>:
Always destroy gear joints before the revolute/prismatic joints on the
gears. Otherwise you will see unexpected behavior due to the orphaned
joint references in the gear joint. You should also destroy the gear joint
before you destroy any of the bodies involved.</p>
</blockquote>
<h3>Mouse Joint</h3>
<p>The mouse joint is used in the testbed to manipulate bodies with the
mouse. It attempts to drive a point on a body towards the current
position of the cursor. There is no restriction on rotation.</p>
<p>The mouse joint definition has a target point, maximum force, frequency,
and damping ratio. The target point initially coincides with the body's
anchor point. The maximum force is used to prevent violent reactions
when multiple dynamic bodies interact. You can make this as large as you
like. The frequency and damping ratio are used to create a spring/damper
effect similar to the distance joint.</p>
<p>Many users have tried to adapt the mouse joint for game play. Users
often want to achieve precise positioning and instantaneous response.
The mouse joint doesn't work very well in that context. You may wish to
consider using kinematic bodies instead.</p>
<h3>Wheel Joint</h3>
<p>The wheel joint restricts a point on bodyB to a line on bodyA. The wheel
joint also provides a suspension spring. See b2_wheel_joint.ts and car.ts
for details.</p>
<p><img src="https://lusito.github.io/box2d.ts/assets/wheel_joint-1b3e88bb.svg" alt="Wheel Joint"></p>
<h3>Weld Joint</h3>
<p>The weld joint attempts to constrain all relative motion between two
bodies. See the cantilever.ts in the testbed to see how the weld joint
behaves.</p>
<p>It is tempting to use the weld joint to define breakable structures.
However, the Box2D solver is iterative so the joints are a bit soft. So
chains of bodies connected by weld joints will flex.</p>
<p>Instead it is better to create breakable bodies starting with a single
body with multiple fixtures. When the body breaks, you can destroy a
fixture and recreate it on a new body. See the Breakable example in the
testbed.</p>
<h3>Friction Joint</h3>
<p>The friction joint is used for top-down friction. The joint provides 2D
translational friction and angular friction. See b2_friction_joint.ts and
apply_force.ts for details.</p>
<h3>Motor Joint</h3>
<p>A motor joint lets you control the motion of a body by specifying target
position and rotation offsets. You can set the maximum motor force and
torque that will be applied to reach the target position and rotation.
If the body is blocked, it will stop and the contact forces will be
proportional the maximum motor force and torque. See b2MotorJoint and
motor_joint.ts for details.</p>
<h3>Wheel Joint</h3>
<p>The wheel joint is designed specifically for vehicles. It provides a translation
and rotation. The translation has a spring and damper to simulate the vehicle
suspension. The rotation allows the wheel to rotate. You can specify an rotational
motor to drive the wheel and to apply braking. See b2WheelJoint, wheel_joint.ts,
and car.ts for details.</p>
<h2 id="contacts">Contacts</h2>
<p>Contacts are objects created by Box2D to manage collision between two
fixtures. If the fixture has children, such as a chain shape, then a
contact exists for each relevant child. There are different kinds of
contacts, derived from b2Contact, for managing contact between different
kinds of fixtures. For example there is a contact class for managing
polygon-polygon collision and another contact class for managing
circle-circle collision.</p>
<p>Here is some terminology associated with contacts.</p>
<h5>Contact Point</h5>
<p>A contact point is a point where two shapes touch. Box2D approximates
contact with a small number of points.</p>
<h5>Contact Normal</h5>
<p>A contact normal is a unit vector that points from one shape to another.
By convention, the normal points from fixtureA to fixtureB.</p>
<h5>Contact Separation</h5>
<p>Separation is the opposite of penetration. Separation is negative when
shapes overlap. It is possible that future versions of Box2D will create
contact points with positive separation, so you may want to check the
sign when contact points are reported.</p>
<h5>Contact Manifold</h5>
<p>Contact between two convex polygons may generate up to 2 contact points.
Both of these points use the same normal, so they are grouped into a
contact manifold, which is an approximation of a continuous region of
contact.</p>
<h5>Normal Impulse</h5>
<p>The normal force is the force applied at a contact point to prevent the
shapes from penetrating. For convenience, Box2D works with impulses. The
normal impulse is just the normal force multiplied by the time step.</p>
<h5>Tangent Impulse</h5>
<p>The tangent force is generated at a contact point to simulate friction.
For convenience, this is stored as an impulse.</p>
<h5>Contact Ids</h5>
<p>Box2D tries to re-use the contact force results from a time step as the
initial guess for the next time step. Box2D uses contact ids to match
contact points across time steps. The ids contain geometric features
indices that help to distinguish one contact point from another.</p>
<p>Contacts are created when two fixture's AABBs overlap. Sometimes
collision filtering will prevent the creation of contacts. Contacts are
destroyed with the AABBs cease to overlap.</p>
<p>So you might gather that there may be contacts created for fixtures that
are not touching (just their AABBs). Well, this is correct. It's a
&quot;chicken or egg&quot; problem. We don't know if we need a contact object
until one is created to analyze the collision. We could delete the
contact right away if the shapes are not touching, or we can just wait
until the AABBs stop overlapping. Box2D takes the latter approach
because it lets the system cache information to improve performance.</p>
<h3>Contact Class</h3>
<p>As mentioned before, the contact class is created and destroyed by
Box2D. Contact objects are not created by the user. However, you are
able to access the contact class and interact with it.</p>
<p>You can access the raw contact manifold:</p>
<pre><code class="hljs">// on b2Contact:
public GetManifold(): b2Manifold;
</code><code-copy-button role="button" code="// on b2Contact:
public GetManifold(): b2Manifold;" title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<p>You can potentially modify the manifold, but this is generally not
supported and is for advanced usage.</p>
<p>There is a helper function to get the <code>b2WorldManifold</code>:</p>
<pre><code class="hljs"><span class="hljs-comment">// on b2Contact:</span>
<span class="hljs-keyword">public</span> <span class="hljs-title class_">GetWorldManifold</span>(<span class="hljs-attr">worldManifold</span>: b2WorldManifold): <span class="hljs-built_in">void</span>;
</code><code-copy-button role="button" code="// on b2Contact:
public GetWorldManifold(worldManifold: b2WorldManifold): void;" title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<p>This uses the current positions of the bodies to compute world positions
of the contact points.</p>
<p>Sensors do not create manifolds, so for them use:</p>
<pre><code class="hljs"><span class="hljs-keyword">const</span> touching = sensorContact.<span class="hljs-title class_">IsTouching</span>();
</code><code-copy-button role="button" code="const touching = sensorContact.IsTouching();" title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<p>This function also works for non-sensors.</p>
<p>You can get the fixtures from a contact. From those you can get the
bodies.</p>
<pre><code class="hljs"><span class="hljs-keyword">const</span> <span class="hljs-attr">fixtureA</span>: b2Fixture = myContact.<span class="hljs-title class_">GetFixtureA</span>();
<span class="hljs-keyword">const</span> <span class="hljs-attr">bodyA</span>: b2Body = fixtureA.<span class="hljs-title class_">GetBody</span>();
</code><code-copy-button role="button" code="const fixtureA: b2Fixture = myContact.GetFixtureA();
const bodyA: b2Body = fixtureA.GetBody();" title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<p>You can disable a contact. This only works inside the
b2ContactListener::PreSolve event, discussed below.</p>
<h3>Accessing Contacts</h3>
<p>You can get access to contacts in several ways. You can access the
contacts directly on the world and body structures. You can also
implement a contact listener.</p>
<p>You can iterate over all contacts in the world:</p>
<pre><code class="hljs"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> <span class="hljs-attr">c</span>: b2Contact | <span class="hljs-literal">null</span> = myWorld.<span class="hljs-title class_">GetContactList</span>(); c; c = c.<span class="hljs-title class_">GetNext</span>()) {
  <span class="hljs-comment">// process c</span>
}
</code><code-copy-button role="button" code="for (let c: b2Contact | null = myWorld.GetContactList(); c; c = c.GetNext()) {
  // process c
}" title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<p>You can also iterate over all the contacts on a body. These are stored
in a graph using a contact edge class.</p>
<pre><code class="hljs"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> <span class="hljs-attr">ce</span>: b2ContactEdge | <span class="hljs-literal">null</span> = myBody.<span class="hljs-title class_">GetContactList</span>(); ce; ce = ce.<span class="hljs-property">next</span>) {
  <span class="hljs-keyword">const</span> <span class="hljs-attr">c</span>: b2Contact = ce.<span class="hljs-property">contact</span>;
  <span class="hljs-comment">// process c</span>
}
</code><code-copy-button role="button" code="for (let ce: b2ContactEdge | null = myBody.GetContactList(); ce; ce = ce.next) {
  const c: b2Contact = ce.contact;
  // process c
}" title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<p>You can also access contacts using the contact listener that is
described below.</p>
<blockquote>
<p><strong>Caution</strong>:
Accessing contacts off b2World and b2Body may miss some transient
contacts that occur in the middle of the time step. Use
b2ContactListener to get the most accurate results.</p>
</blockquote>
<h3>Contact Listener</h3>
<p>You can receive contact data by extending b2ContactListener. The
contact listener supports several events: begin, end, pre-solve, and
post-solve.</p>
<pre><code class="hljs"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyContactListener</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">b2ContactListener</span> {
  <span class="hljs-keyword">public</span> <span class="hljs-title class_">BeginContact</span>(<span class="hljs-attr">contact</span>: b2Contact): <span class="hljs-built_in">void</span> {
    <span class="hljs-comment">/* handle begin event */</span>
  }

  <span class="hljs-keyword">public</span> <span class="hljs-title class_">EndContact</span>(<span class="hljs-attr">contact</span>: b2Contact): <span class="hljs-built_in">void</span> {
    <span class="hljs-comment">/* handle end event */</span>
  }

  <span class="hljs-keyword">public</span> <span class="hljs-title class_">PreSolve</span>(<span class="hljs-attr">contact</span>: b2Contact, <span class="hljs-attr">oldManifold</span>: b2Manifold): <span class="hljs-built_in">void</span> {
    <span class="hljs-comment">/* handle pre-solve event */</span>
  }

  <span class="hljs-keyword">public</span> <span class="hljs-title class_">PostSolve</span>(<span class="hljs-attr">contact</span>: b2Contact, <span class="hljs-attr">impulse</span>: b2ContactImpulse): <span class="hljs-built_in">void</span> {
    <span class="hljs-comment">/* handle post-solve event */</span>
  }
}
</code><code-copy-button role="button" code="class MyContactListener extends b2ContactListener {
  public BeginContact(contact: b2Contact): void {
    /* handle begin event */
  }

  public EndContact(contact: b2Contact): void {
    /* handle end event */
  }

  public PreSolve(contact: b2Contact, oldManifold: b2Manifold): void {
    /* handle pre-solve event */
  }

  public PostSolve(contact: b2Contact, impulse: b2ContactImpulse): void {
    /* handle post-solve event */
  }
}" title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<blockquote>
<p><strong>Caution</strong>:
Do not keep a reference to the references sent to b2ContactListener.
Instead make a deep copy of the contact point data into your own buffer.
The example below shows one way of doing this.</p>
</blockquote>
<p>At run-time you can create an instance of the listener and register it
with <code>b2World::SetContactListener</code>.</p>
<h4>Begin Contact Event</h4>
<p>This is called when two fixtures begin to overlap. This is called for
sensors and non-sensors. This event can only occur inside the time step.</p>
<h4>End Contact Event</h4>
<p>This is called when two fixtures cease to overlap. This is called for
sensors and non-sensors. This may be called when a body is destroyed, so
this event can occur outside the time step.</p>
<h4>Pre-Solve Event</h4>
<p>This is called after collision detection, but before collision
resolution. This gives you a chance to disable the contact based on the
current configuration. For example, you can implement a one-sided
platform using this callback and calling <code>b2Contact::SetEnabled(false)</code>.
The contact will be re-enabled each time through collision processing,
so you will need to disable the contact every time-step. The pre-solve
event may be fired multiple times per time step per contact due to
continuous collision detection.</p>
<pre><code class="hljs"><span class="hljs-keyword">public</span> <span class="hljs-title class_">PreSolve</span>(<span class="hljs-attr">contact</span>: b2Contact, <span class="hljs-attr">oldManifold</span>: b2Manifold): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">const</span> worldManifold = <span class="hljs-keyword">new</span> <span class="hljs-title function_">b2WorldManifold</span>();
    contact.<span class="hljs-title class_">GetWorldManifold</span>(worldManifold);
    <span class="hljs-keyword">if</span> (worldManifold.<span class="hljs-property">normal</span>.<span class="hljs-property">y</span> &lt; -<span class="hljs-number">0.5</span>) {
        contact.<span class="hljs-title class_">SetEnabled</span>(<span class="hljs-literal">false</span>);
    }
}
</code><code-copy-button role="button" code="public PreSolve(contact: b2Contact, oldManifold: b2Manifold): void {
    const worldManifold = new b2WorldManifold();
    contact.GetWorldManifold(worldManifold);
    if (worldManifold.normal.y &lt; -0.5) {
        contact.SetEnabled(false);
    }
}" title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<p>The pre-solve event is also a good place to determine the point state
and the approach velocity of collisions.</p>
<pre><code class="hljs"><span class="hljs-keyword">public</span> <span class="hljs-title class_">PreSolve</span>(<span class="hljs-attr">contact</span>: b2Contact, <span class="hljs-attr">oldManifold</span>: b2Manifold): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">const</span> worldManifold = <span class="hljs-keyword">new</span> <span class="hljs-title function_">b2WorldManifold</span>();
    contact.<span class="hljs-title class_">GetWorldManifold</span>(worldManifold);

    <span class="hljs-keyword">const</span> <span class="hljs-attr">state1</span>: b2PointState[] = [];
    <span class="hljs-keyword">const</span> <span class="hljs-attr">state2</span>: b2PointState[] = [];
    <span class="hljs-title function_">b2GetPointStates</span>(state1, state2, oldManifold, contact.<span class="hljs-title class_">GetManifold</span>());

    <span class="hljs-keyword">if</span> (state2[<span class="hljs-number">0</span>] === b2_addState) {
        <span class="hljs-keyword">const</span> <span class="hljs-attr">bodyA</span>: b2Body = contact.<span class="hljs-title class_">GetFixtureA</span>().<span class="hljs-title class_">GetBody</span>();
        <span class="hljs-keyword">const</span> <span class="hljs-attr">bodyB</span>: b2Body = contact.<span class="hljs-title class_">GetFixtureB</span>().<span class="hljs-title class_">GetBody</span>();
        <span class="hljs-keyword">const</span> <span class="hljs-attr">point</span>: b2Vec2 = worldManifold.<span class="hljs-property">points</span>[<span class="hljs-number">0</span>];
        <span class="hljs-keyword">const</span> <span class="hljs-attr">vA</span>: b2Vec2 = bodyA.<span class="hljs-title class_">GetLinearVelocityFromWorldPoint</span>(point, <span class="hljs-keyword">new</span> <span class="hljs-title function_">b2Vec2</span>());
        <span class="hljs-keyword">const</span> <span class="hljs-attr">vB</span>: b2Vec2 = bodyB.<span class="hljs-title class_">GetLinearVelocityFromWorldPoint</span>(point, <span class="hljs-keyword">new</span> <span class="hljs-title function_">b2Vec2</span>());

        <span class="hljs-keyword">const</span> <span class="hljs-attr">approachVelocity</span>: <span class="hljs-built_in">number</span> = b2Vec2.<span class="hljs-title class_">Dot</span>(b2Vec2.<span class="hljs-title class_">Subtract</span>(vB, vA, <span class="hljs-keyword">new</span> <span class="hljs-title function_">b2Vec2</span>()), worldManifold.<span class="hljs-property">normal</span>);

        <span class="hljs-keyword">if</span> (approachVelocity &gt; <span class="hljs-number">1</span>) {
            <span class="hljs-title class_">MyPlayCollisionSound</span>();
        }
    }
}
</code><code-copy-button role="button" code="public PreSolve(contact: b2Contact, oldManifold: b2Manifold): void {
    const worldManifold = new b2WorldManifold();
    contact.GetWorldManifold(worldManifold);

    const state1: b2PointState[] = [];
    const state2: b2PointState[] = [];
    b2GetPointStates(state1, state2, oldManifold, contact.GetManifold());

    if (state2[0] === b2_addState) {
        const bodyA: b2Body = contact.GetFixtureA().GetBody();
        const bodyB: b2Body = contact.GetFixtureB().GetBody();
        const point: b2Vec2 = worldManifold.points[0];
        const vA: b2Vec2 = bodyA.GetLinearVelocityFromWorldPoint(point, new b2Vec2());
        const vB: b2Vec2 = bodyB.GetLinearVelocityFromWorldPoint(point, new b2Vec2());

        const approachVelocity: number = b2Vec2.Dot(b2Vec2.Subtract(vB, vA, new b2Vec2()), worldManifold.normal);

        if (approachVelocity &gt; 1) {
            MyPlayCollisionSound();
        }
    }
}" title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<h4>Post-Solve Event</h4>
<p>The post solve event is where you can gather collision impulse results.
If you don't care about the impulses, you should probably just implement
the pre-solve event.</p>
<p>It is tempting to implement game logic that alters the physics world
inside a contact callback. For example, you may have a collision that
applies damage and try to destroy the associated actor and its rigid
body. However, Box2D does not allow you to alter the physics world
inside a callback because you might destroy objects that Box2D is
currently processing, leading to orphaned references.</p>
<p>The recommended practice for processing contact points is to buffer all
contact data that you care about and process it after the time step. You
should always process the contact points immediately after the time
step; otherwise some other client code might alter the physics world,
invalidating the contact buffer. When you process the contact buffer you
can alter the physics world, but you still need to be careful that you
don't orphan references stored in the contact point buffer. The testbed
has example contact point processing that is safe from orphaned
references.</p>
<p>This code from the CollisionProcessing test shows how to handle orphaned
bodies when processing the contact buffer. Here is an excerpt. Be sure
to read the comments in the listing. This code assumes that all contact
points have been buffered in the b2ContactPoint array m_points.</p>
<pre><code class="hljs"><span class="hljs-comment">// We are going to destroy some bodies according to contact</span>
<span class="hljs-comment">// points. We must buffer the bodies that should be destroyed</span>
<span class="hljs-comment">// because they may belong to multiple contact points.</span>
<span class="hljs-keyword">const</span> k_maxNuke = <span class="hljs-number">6</span>;
<span class="hljs-comment">// Using a set to prevent duplicates</span>
<span class="hljs-keyword">const</span> nuke = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>&lt;b2Body&gt;();
<span class="hljs-keyword">let</span> nukeCount = <span class="hljs-number">0</span>;

<span class="hljs-comment">// Traverse the contact buffer. Destroy bodies that</span>
<span class="hljs-comment">// are touching heavier bodies.</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> point <span class="hljs-keyword">of</span> m_points) {
  <span class="hljs-keyword">const</span> <span class="hljs-attr">bodyA</span>: b2Body = point.<span class="hljs-property">fixtureA</span>.<span class="hljs-title class_">GetBody</span>();
  <span class="hljs-keyword">const</span> <span class="hljs-attr">bodyB</span>: b2Body = point.<span class="hljs-property">FixtureB</span>.<span class="hljs-title class_">GetBody</span>();
  <span class="hljs-keyword">const</span> <span class="hljs-attr">massA</span>: <span class="hljs-built_in">number</span> = bodyA.<span class="hljs-title class_">GetMass</span>();
  <span class="hljs-keyword">const</span> <span class="hljs-attr">massB</span>: <span class="hljs-built_in">number</span> = bodyB.<span class="hljs-title class_">GetMass</span>();

  <span class="hljs-keyword">if</span> (massA &gt; <span class="hljs-number">0</span> &amp;&amp; massB &gt; <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">if</span> (massB &gt; massA) {
      nuke.<span class="hljs-title function_">add</span>(bodyA);
    } <span class="hljs-keyword">else</span> {
      nuke.<span class="hljs-title function_">add</span>(bodyB);
    }

    <span class="hljs-keyword">if</span> (nukeCount === k_maxNuke) {
      <span class="hljs-keyword">break</span>;
    }
  }
}

<span class="hljs-comment">// Destroy the bodies</span>
nuke.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">b</span>) =&gt;</span> m_world.<span class="hljs-title class_">DestroyBody</span>(b));
</code><code-copy-button role="button" code="// We are going to destroy some bodies according to contact
// points. We must buffer the bodies that should be destroyed
// because they may belong to multiple contact points.
const k_maxNuke = 6;
// Using a set to prevent duplicates
const nuke = new Set&lt;b2Body&gt;();
let nukeCount = 0;

// Traverse the contact buffer. Destroy bodies that
// are touching heavier bodies.
for (const point of m_points) {
  const bodyA: b2Body = point.fixtureA.GetBody();
  const bodyB: b2Body = point.FixtureB.GetBody();
  const massA: number = bodyA.GetMass();
  const massB: number = bodyB.GetMass();

  if (massA &gt; 0 &amp;&amp; massB &gt; 0) {
    if (massB &gt; massA) {
      nuke.add(bodyA);
    } else {
      nuke.add(bodyB);
    }

    if (nukeCount === k_maxNuke) {
      break;
    }
  }
}

// Destroy the bodies
nuke.forEach((b) =&gt; m_world.DestroyBody(b));" title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<h3>Contact Filtering</h3>
<p>Often in a game you don't want all objects to collide. For example, you
may want to create a door that only certain characters can pass through.
This is called contact filtering, because some interactions are filtered
out.</p>
<p>Box2D allows you to achieve custom contact filtering by implementing a
b2ContactFilter class. This class requires you to implement a
ShouldCollide function that receives two b2Shape references. Your function
returns true if the shapes should collide.</p>
<p>The default implementation of ShouldCollide uses the b2FilterData
defined in Chapter 6, Fixtures.</p>
<pre><code class="hljs"><span class="hljs-keyword">public</span> <span class="hljs-title class_">ShouldCollide</span>(<span class="hljs-attr">fixtureA</span>: b2Fixture, <span class="hljs-attr">fixtureB</span>: b2Fixture): <span class="hljs-built_in">boolean</span> {
    <span class="hljs-keyword">const</span> <span class="hljs-attr">filterA</span>: <span class="hljs-title class_">Readonly</span>&lt;b2Filter&gt; = fixtureA.<span class="hljs-title class_">GetFilterData</span>();
    <span class="hljs-keyword">const</span> <span class="hljs-attr">filterB</span>: <span class="hljs-title class_">Readonly</span>&lt;b2Filter&gt; = fixtureB.<span class="hljs-title class_">GetFilterData</span>();

    <span class="hljs-keyword">if</span> (filterA.<span class="hljs-property">groupIndex</span> === filterB.<span class="hljs-property">groupIndex</span> &amp;&amp; filterA.<span class="hljs-property">groupIndex</span> !== <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">return</span> filterA.<span class="hljs-property">groupIndex</span> &gt; <span class="hljs-number">0</span>;
    }

    <span class="hljs-keyword">const</span> collideA = (filterA.<span class="hljs-property">maskBits</span> &amp; filterB.<span class="hljs-property">categoryBits</span>) !== <span class="hljs-number">0</span>;
    <span class="hljs-keyword">const</span> collideB = (filterA.<span class="hljs-property">categoryBits</span> &amp; filterB.<span class="hljs-property">maskBits</span>) !== <span class="hljs-number">0</span>
    <span class="hljs-keyword">const</span> collide =  collideA &amp;&amp; collideB;
    <span class="hljs-keyword">return</span> collide;
}
</code><code-copy-button role="button" code="public ShouldCollide(fixtureA: b2Fixture, fixtureB: b2Fixture): boolean {
    const filterA: Readonly&lt;b2Filter&gt; = fixtureA.GetFilterData();
    const filterB: Readonly&lt;b2Filter&gt; = fixtureB.GetFilterData();

    if (filterA.groupIndex === filterB.groupIndex &amp;&amp; filterA.groupIndex !== 0) {
        return filterA.groupIndex &gt; 0;
    }

    const collideA = (filterA.maskBits &amp; filterB.categoryBits) !== 0;
    const collideB = (filterA.categoryBits &amp; filterB.maskBits) !== 0
    const collide =  collideA &amp;&amp; collideB;
    return collide;
}" title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<p>At run-time you can create an instance of your contact filter and
register it with <code>b2World::SetContactFilter</code>.</p>
<pre><code class="hljs"><span class="hljs-keyword">const</span> filter = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyContactFilter</span>();
world.<span class="hljs-title class_">SetContactFilter</span>(filter);
</code><code-copy-button role="button" code="const filter = new MyContactFilter();
world.SetContactFilter(filter);" title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<h2 id="world">World</h2>
<p>The <code>b2World</code> class contains the bodies and joints. It manages all aspects
of the simulation and allows for asynchronous queries (like AABB queries
and ray-casts). Much of your interactions with Box2D will be with a
b2World object.</p>
<h3>Creating and Destroying a World</h3>
<p>Creating a world is fairly simple. You just need to provide a gravity
vector. Usually you will create a world like this:</p>
<pre><code class="hljs"><span class="hljs-keyword">const</span> myWorld = <span class="hljs-keyword">new</span> b2World.<span class="hljs-title class_">Create</span>(gravity);

<span class="hljs-comment">// ... do stuff ...</span>
</code><code-copy-button role="button" code="const myWorld = new b2World.Create(gravity);

// ... do stuff ..." title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<p>Unlike the C++, there is no destroying a world. Just remove all references and the garbage collector will take care of the rest.</p>
<h3>Using a World</h3>
<p>The world class contains factories for creating and destroying bodies
and joints. These factories are discussed later in the sections on
bodies and joints. There are some other interactions with b2World that I
will cover now.</p>
<h3>Simulation</h3>
<p>The world class is used to drive the simulation. You specify a time step
and a velocity and position iteration count. For example:</p>
<pre><code class="hljs"><span class="hljs-keyword">const</span> timeStep = <span class="hljs-number">1</span> / <span class="hljs-number">60</span>;
<span class="hljs-keyword">const</span> <span class="hljs-attr">stepConfig</span>: b2StepConfig = {
  <span class="hljs-attr">velocityIterations</span>: <span class="hljs-number">10</span>,
  <span class="hljs-attr">positionIterations</span>: <span class="hljs-number">8</span>,
};
myWorld.<span class="hljs-title class_">Step</span>(timeStep, stepConfig);
</code><code-copy-button role="button" code="const timeStep = 1 / 60;
const stepConfig: b2StepConfig = {
  velocityIterations: 10,
  positionIterations: 8,
};
myWorld.Step(timeStep, stepConfig);" title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<p>After the time step you can examine your bodies and joints for
information. Most likely you will grab the position off the bodies so
that you can update your actors and render them. You can perform the
time step anywhere in your game loop, but you should be aware of the
order of things. For example, you must create bodies before the time
step if you want to get collision results for the new bodies in that
frame.</p>
<p>As I discussed above in the HelloWorld tutorial, you should use a fixed
time step. By using a larger time step you can improve performance in
low frame rate scenarios. But generally you should use a time step no
larger than 1/30 seconds. A time step of 1/60 seconds will usually
deliver a high quality simulation.</p>
<p>The iteration count controls how many times the constraint solver sweeps
over all the contacts and joints in the world. More iteration always
yields a better simulation. But don't trade a small time step for a
large iteration count. 60Hz and 10 iterations is far better than 30Hz
and 20 iterations.</p>
<p>After stepping, you should clear any forces you have applied to your
bodies. This is done with the command <code>b2World::ClearForces</code>. This lets
you take multiple sub-steps with the same force field.</p>
<pre><code class="hljs">myWorld.<span class="hljs-title class_">ClearForces</span>();
</code><code-copy-button role="button" code="myWorld.ClearForces();" title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<h3>Exploring the World</h3>
<p>The world is a container for bodies, contacts, and joints. You can grab
the body, contact, and joint lists off the world and iterate over them.
For example, this code wakes up all the bodies in the world:</p>
<pre><code class="hljs"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> <span class="hljs-attr">b</span>: b2Body | <span class="hljs-literal">null</span> = myWorld.<span class="hljs-title class_">GetBodyList</span>(); b; b = b.<span class="hljs-title class_">GetNext</span>()) {
  b.<span class="hljs-title class_">SetAwake</span>(<span class="hljs-literal">true</span>);
}
</code><code-copy-button role="button" code="for (let b: b2Body | null = myWorld.GetBodyList(); b; b = b.GetNext()) {
  b.SetAwake(true);
}" title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<p>In the C++ version, it would have been problematic to destroy a body during iteration.
In the TypeScript version, there should be no such issue, since the body is only garbage
collected when no more references exist.</p>
<h3>AABB Queries</h3>
<p>Sometimes you want to determine all the shapes in a region. The b2World
class has a fast log(N) method for this using the broad-phase data
structure. You provide an AABB in world coordinates and an
implementation of b2QueryCallback. The world calls your class with each
fixture whose AABB overlaps the query AABB. Return true to continue the
query, otherwise return false. For example, the following code finds all
the fixtures that potentially intersect a specified AABB and wakes up
all of the associated bodies.</p>
<pre><code class="hljs"><span class="hljs-keyword">const</span> <span class="hljs-attr">myQueryCallback</span>: b2QueryCallback = (<span class="hljs-attr">fixture</span>: b2Fixture): <span class="hljs-function"><span class="hljs-params">boolean</span> =&gt;</span> {
  <span class="hljs-keyword">const</span> <span class="hljs-attr">body</span>: b2Body = fixture.<span class="hljs-title class_">GetBody</span>();
  body.<span class="hljs-title class_">SetAwake</span>(<span class="hljs-literal">true</span>);

  <span class="hljs-comment">// Return true to continue the query.</span>
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
};

<span class="hljs-comment">// Elsewhere ...</span>
<span class="hljs-keyword">const</span> aabb = <span class="hljs-keyword">new</span> <span class="hljs-title function_">b2AABB</span>();

aabb.<span class="hljs-property">lowerBound</span>.<span class="hljs-title class_">Set</span>(-<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>);
aabb.<span class="hljs-property">upperBound</span>.<span class="hljs-title class_">Set</span>(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>);
myWorld.<span class="hljs-title class_">QueryAABB</span>(aabb, myQueryCallback);
</code><code-copy-button role="button" code="const myQueryCallback: b2QueryCallback = (fixture: b2Fixture): boolean =&gt; {
  const body: b2Body = fixture.GetBody();
  body.SetAwake(true);

  // Return true to continue the query.
  return true;
};

// Elsewhere ...
const aabb = new b2AABB();

aabb.lowerBound.Set(-1, -1);
aabb.upperBound.Set(1, 1);
myWorld.QueryAABB(aabb, myQueryCallback);" title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<p>You cannot make any assumptions about the order of the callbacks.</p>
<h3>Ray Casts</h3>
<p>You can use ray casts to do line-of-sight checks, fire guns, etc. You
perform a ray cast by implementing a callback class and providing the
start and end points. The world class calls your class with each fixture
hit by the ray. Your callback is provided with the fixture, the point of
intersection, the unit normal vector, and the fractional distance along
the ray. You cannot make any assumptions about the order of the
callbacks.</p>
<p>You control the continuation of the ray cast by returning a fraction.
Returning a fraction of zero indicates the ray cast should be
terminated. A fraction of one indicates the ray cast should continue as
if no hit occurred. If you return the fraction from the argument list,
the ray will be clipped to the current intersection point. So you can
ray cast any shape, ray cast all shapes, or ray cast the closest shape
by returning the appropriate fraction.</p>
<p>You may also return of fraction of -1 to filter the fixture. Then the
ray cast will proceed as if the fixture does not exist.</p>
<p>Here is an example:</p>
<pre><code class="hljs"><span class="hljs-comment">// This class captures the closest hit shape.</span>
<span class="hljs-comment">// Note that you don&#x27;t need a class for this, you can do it with functions (and closures) as well!</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyRayCastCallback</span> {
  <span class="hljs-keyword">public</span> <span class="hljs-attr">fixture</span>: b2Fixture | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">readonly</span> point = <span class="hljs-keyword">new</span> <span class="hljs-title function_">b2Vec2</span>();
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">readonly</span> normal = <span class="hljs-keyword">new</span> <span class="hljs-title function_">b2Vec2</span>();
  <span class="hljs-keyword">public</span> fraction = <span class="hljs-number">0</span>;

  <span class="hljs-keyword">public</span> <span class="hljs-attr">callback</span>: b2RayCastCallback = (
    <span class="hljs-attr">fixture</span>: b2Fixture,
    <span class="hljs-attr">point</span>: b2Readonly&lt;b2Vec2&gt;,
    <span class="hljs-attr">normal</span>: b2Readonly&lt;b2Vec2&gt;,
    <span class="hljs-attr">fraction</span>: <span class="hljs-built_in">number</span>,
  ): <span class="hljs-function"><span class="hljs-params">number</span> =&gt;</span> {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">fixture</span> = fixture;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">point</span>.<span class="hljs-title class_">Copy</span>(point);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">normal</span>.<span class="hljs-title class_">Copy</span>(normal);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">fraction</span> = fraction;
    <span class="hljs-keyword">return</span> fraction;
  };
}

<span class="hljs-comment">// Elsewhere ...</span>
<span class="hljs-keyword">const</span> myCallback = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyRayCastCallback</span>();
<span class="hljs-keyword">const</span> <span class="hljs-attr">point1</span>: <span class="hljs-variable constant_">XY</span> = { <span class="hljs-attr">x</span>: -<span class="hljs-number">1</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span> };
<span class="hljs-keyword">const</span> <span class="hljs-attr">point2</span>: <span class="hljs-variable constant_">XY</span> = { <span class="hljs-attr">x</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">1</span> };
myWorld.<span class="hljs-title class_">RayCast</span>(point1, point2, myCallback.<span class="hljs-property">callback</span>);
<span class="hljs-keyword">const</span> { fixture, point, normal, fraction } = myCallback;
<span class="hljs-comment">// ...</span>
</code><code-copy-button role="button" code="// This class captures the closest hit shape.
// Note that you don&#x27;t need a class for this, you can do it with functions (and closures) as well!
class MyRayCastCallback {
  public fixture: b2Fixture | null = null;
  public readonly point = new b2Vec2();
  public readonly normal = new b2Vec2();
  public fraction = 0;

  public callback: b2RayCastCallback = (
    fixture: b2Fixture,
    point: b2Readonly&lt;b2Vec2&gt;,
    normal: b2Readonly&lt;b2Vec2&gt;,
    fraction: number,
  ): number =&gt; {
    this.fixture = fixture;
    this.point.Copy(point);
    this.normal.Copy(normal);
    this.fraction = fraction;
    return fraction;
  };
}

// Elsewhere ...
const myCallback = new MyRayCastCallback();
const point1: XY = { x: -1, y: 0 };
const point2: XY = { x: 3, y: 1 };
myWorld.RayCast(point1, point2, myCallback.callback);
const { fixture, point, normal, fraction } = myCallback;
// ..." title="Copy the code snippet to the clipboard" aria-label="Copy the code snippet to the clipboard" enhancedclass="enhanced-copy-button_LJDte"></code-copy-button></pre>
<blockquote>
<p><strong>Caution</strong>:
Due to round-off errors, ray casts can sneak through small cracks
between polygons in your static environment. If this is not acceptable
in your application, trying slightly overlapping your polygons.</p>
</blockquote>
</div></div></article></main><footer class="footer_1ydRsP"><span>Copyright © 2022 Santo Pfingsten</span></footer></div></body></html>